[{"content":"ä»¥ä¸‹æ˜¯ä¸ºæ‚¨åˆ¶å®šçš„å®Œæ•´ç³»ç»Ÿèƒ½åŠ›æå‡æ–¹æ¡ˆï¼Œæ•´åˆäº†æºç ç²¾è¯»ã€å®è·µç­–ç•¥å’Œå·¥å…·é“¾æ”¯æŒï¼Œç‰¹åˆ«é’ˆå¯¹Rust/Golangå­˜å‚¨ä¸é«˜æ€§èƒ½ç³»ç»Ÿé¢†åŸŸï¼Œåˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µå®æ–½ï¼ˆé™„æ—¶é—´è§„åˆ’ä¸éš¾åº¦æ ‡ç­¾ï¼‰ï¼š\nåˆå§‹æ–¹æ¡ˆ ä¸€ã€ç­‘åŸºé˜¶æ®µï¼šå­˜å‚¨å¼•æ“æ ¸å¿ƒå®ç°ï¼ˆ1-2ä¸ªæœˆï¼‰ ç›®æ ‡ï¼šæŒæ¡å•æœºå­˜å‚¨å¼•æ“è®¾è®¡èŒƒå¼ï¼Œç†è§£ç£ç›˜/å†…å­˜äº¤äº’åŸç†\næ¨èé¡¹ç›®ï¼š\nRosedbï¼ˆGolangï¼‰\næ ¸å¿ƒæ¨¡å—ï¼š merge.goï¼šå­¦ä¹ LSM Treeçš„Compactionç­–ç•¥ä¸æ–‡ä»¶åˆå¹¶é€»è¾‘ï¼ˆé‡ç‚¹åˆ†ææ•°æ®å†·çƒ­åˆ†ç¦»ç­–ç•¥ï¼‰ batch.goï¼šæ‰¹å¤„ç†æ“ä½œçš„åŸå­æ€§å®ç°ï¼ˆè§‚å¯Ÿå¦‚ä½•é€šè¿‡WALä¿è¯å´©æºƒä¸€è‡´æ€§ï¼‰ iterator.goï¼šè·³è¡¨ç´¢å¼•å®ç°ï¼ˆå¯¹æ¯”Redis ZSETçš„ziplistä¼˜åŒ–æ€è·¯ï¼‰ å®æ“ä»»åŠ¡ï¼š æ·»åŠ TTLè¿‡æœŸæœºåˆ¶ï¼ˆéœ€ä¿®æ”¹record.goçš„æ•°æ®ç»“æ„ï¼Œå¢åŠ æ—¶é—´æˆ³å­—æ®µï¼‰ ç¼–å†™Mergeè¿‡ç¨‹çš„æ€§èƒ½å‹æµ‹ï¼ˆè®°å½•åˆå¹¶å‰åç£ç›˜ç©ºé—´/IOPSå˜åŒ–ï¼‰ BoltDBï¼ˆGolangï¼‰\nå¯¹æ¯”å­¦ä¹ ï¼š å¯¹æ¯”Rosedbçš„LSMä¸BoltDBçš„B+æ ‘å†™å…¥è·¯å¾„å·®å¼‚ï¼ˆéšæœºå†™vsé¡ºåºè¿½åŠ ï¼‰ åˆ†æbolt/tx.goä¸­MVCCå®ç°ï¼ˆäº‹åŠ¡éš”ç¦»æ€§ä¸COWæœºåˆ¶ï¼‰ äº§å‡ºï¼šå®ç°ç®€åŒ–ç‰ˆLSMå¼•æ“ï¼ˆæ”¯æŒPut/Get/Scanï¼‰ï¼Œè¾“å‡ºæ¶æ„è®¾è®¡å›¾ä¸æ€§èƒ½å¯¹æ¯”æŠ¥å‘Š\näºŒã€ä¸“é¡¹çªç ´é˜¶æ®µï¼šåˆ†å¸ƒå¼ç³»ç»Ÿæ ¸å¿ƒæœºåˆ¶ï¼ˆ2-3ä¸ªæœˆï¼‰ ç›®æ ‡ï¼šæŒæ¡åˆ†å¸ƒå¼å…±è¯†ã€ç½‘ç»œé€šä¿¡ã€äº‹åŠ¡å¤„ç†ä¸‰å¤§æ ¸å¿ƒèƒ½åŠ›\næ¨èé¡¹ç›®ï¼š\nEtcdï¼ˆGolangï¼‰\nç²¾è¯»è·¯çº¿ï¼š Raftå…±è¯†ï¼šetcd/raft/raft.goçš„Step()çŠ¶æ€æœºï¼ˆé‡ç‚¹è·Ÿè¸ªLeaderé€‰ä¸¾æ—¥å¿—åŒæ­¥æµç¨‹ï¼‰ å­˜å‚¨å±‚ï¼šetcd/mvccæ¨¡å—çš„ç‰ˆæœ¬æ§åˆ¶ï¼ˆå­¦ä¹ å¦‚ä½•ç”¨Revisionå®ç°ä¹è§‚é”ï¼‰ ç½‘ç»œå±‚ï¼šetcd/clientv3çš„gRPCæµæ§æœºåˆ¶ï¼ˆåˆ†æé”™è¯¯é‡è¯•ç®—æ³•ï¼‰ å®æ“ä»»åŠ¡ï¼š ä¿®æ”¹lease.goå®ç°ç§Ÿçº¦è‡ªåŠ¨ç»­æœŸï¼ˆéœ€æ•´åˆå¿ƒè·³æ£€æµ‹é€»è¾‘ï¼‰ é€šè¿‡etcdctl debugæ¨¡å¼è¿½è¸ªPutè¯·æ±‚çš„å…¨é“¾è·¯ TiKVï¼ˆRustï¼‰\nå¯¹æ¯”å­¦ä¹ ï¼š å¯¹æ¯”Etcdä¸TiKVçš„Raftå®ç°å·®å¼‚ï¼ˆMulti-Raftåˆ†ç‰‡ vs å•Raftç»„ï¼‰ åˆ†æsrc/storage/txn/scheduler.rsçš„æ‚²è§‚é”å®ç°ï¼ˆä¸Etcdä¹è§‚é”å¯¹æ¯”ï¼‰ äº§å‡ºï¼šè®¾è®¡åˆ†å¸ƒå¼äº‹åŠ¡æ–¹æ¡ˆï¼ˆæ”¯æŒ2PC+è¶…æ—¶å›æ»šï¼‰ï¼Œè¾“å‡ºRAFTè°ƒä¼˜æ‰‹å†Œ\nä¸‰ã€ç³»ç»Ÿå®æˆ˜é˜¶æ®µï¼šé«˜æ€§èƒ½ç³»ç»Ÿå·¥ç¨‹ï¼ˆæŒç»­è¿­ä»£ï¼‰ ç›®æ ‡ï¼šæ„å»ºç”Ÿäº§çº§ç³»ç»Ÿèƒ½åŠ›ï¼Œå‚ä¸å¼€æºç¤¾åŒº\næ¨èé¡¹ç›®ï¼š\nCockroachDBï¼ˆGolangï¼‰\næ ¸å¿ƒæ¨¡å—ï¼š pkg/sql/executionï¼šå‘é‡åŒ–æŸ¥è¯¢å¼•æ“ï¼ˆå­¦ä¹ SIMDä¼˜åŒ–æŠ€å·§ï¼‰ pkg/kv/kvserverï¼šåˆ†å¸ƒå¼äº‹åŠ¡çš„è·¨åˆ†ç‰‡å¤„ç† å‚ä¸æ–¹å¼ï¼š ä»good first issueå…¥æ‰‹ï¼ˆå¦‚ä¿®å¤æ–‡æ¡£æˆ–è¡¥å……å•å…ƒæµ‹è¯•ï¼‰ ä¼˜åŒ–SQLè§£æå™¨æ€§èƒ½ï¼ˆä½¿ç”¨pprofå®šä½çƒ­ç‚¹ï¼‰ Tantivyï¼ˆRustï¼‰\né«˜é˜¶å®è·µï¼š ä¿®æ”¹tantivy/segmentçš„å€’æ’ç´¢å¼•åˆå¹¶ç­–ç•¥ï¼ˆå¼•å…¥åˆ†å±‚åˆå¹¶ï¼‰ ä¸ºBM25ç®—æ³•æ·»åŠ è‡ªå®šä¹‰æƒé‡å› å­ äº§å‡ºï¼šå‘å¼€æºé¡¹ç›®æäº¤PRï¼Œæ’°å†™æŠ€æœ¯æ–‡ç« è§£æç³»ç»Ÿè®¾è®¡éš¾ç‚¹\nå››ã€æ•ˆç‡å¢å¼ºå·¥å…·é“¾ å·¥å…·ç±»å‹ æ¨èå·¥å…· åº”ç”¨åœºæ™¯ æºç åˆ†æ Sourcegraph è·¨ä»“åº“ä»£ç æœç´¢ï¼ˆè·Ÿè¸ªå‡½æ•°è°ƒç”¨é“¾ï¼‰ è°ƒè¯•è¿½è¸ª Delveï¼ˆGolangï¼‰ è·Ÿè¸ªEtcdçš„RAFTçŠ¶æ€å˜è¿ï¼ˆè®¾ç½®æ¡ä»¶æ–­ç‚¹ç›‘æ§é€‰ä¸¾è¶…æ—¶ï¼‰ æ¶æ„å¯è§†åŒ– Diagrams.net ç»˜åˆ¶Rosedbçš„LSMåˆå¹¶æµç¨‹å›¾ æ€§èƒ½å‰–æ pprof + flamegraph åˆ†æTiKVæŸ¥è¯¢å»¶è¿Ÿï¼ˆå®šä½é”ç«äº‰çƒ­ç‚¹ï¼‰ å­¦ä¹ ç®¡ç† ObsidiançŸ¥è¯†å›¾è°± é“¾æ¥æ ¸å¿ƒæ¨¡å—ç¬”è®°ï¼ˆå¦‚RAFTç®—æ³•ä¸ETCDå®ç°çš„åŒå‘å…³è”ï¼‰ äº”ã€å…³é”®æ‰§è¡Œç­–ç•¥ å‚ç›´ç²¾è¯»æ³•ï¼š\næ¯å‘¨èšç„¦1ä¸ªæ ¸å¿ƒæ¨¡å—ï¼ˆå¦‚Rosedbçš„merge.goï¼‰ï¼Œè¾“å‡ºæ¨¡å—æµç¨‹å›¾+å…³é”®æ•°æ®ç»“æ„æ³¨è§£ å¯¹æ¯”é˜…è¯»ï¼ˆå¦‚Etcdçš„MVCC vs TiKVçš„Percolatoræ¨¡å‹ï¼‰ é—®é¢˜é©±åŠ¨è°ƒè¯•ï¼š\næ„é€ æç«¯åœºæ™¯ï¼ˆå¦‚Rosedbå†™å…¥éª¤å¢è§¦å‘Compactionï¼‰ï¼Œç”¨Delveè§‚å¯Ÿåç¨‹è°ƒåº¦é˜»å¡ç‚¹ è´¡çŒ®é—­ç¯ï¼š\n1 2 3 4 5 6 graph LR A[é˜…è¯»æºç ] --\u0026gt; B{å‘ç°ä¼˜åŒ–ç‚¹} B --\u0026gt;|æ€§èƒ½| C[ç¼–å†™Benchmark] B --\u0026gt;|åŠŸèƒ½| D[è¡¥å……æµ‹è¯•ç”¨ä¾‹] C --\u0026gt; E[æäº¤PR+æ€§èƒ½æŠ¥å‘Š] D --\u0026gt; E ğŸ’¡ é¿å‘æŒ‡å—ï¼š\né¿å…è¿‡æ—©é™·å…¥åº•å±‚ï¼ˆå¦‚Rustçš„unsafeä»£ç ï¼‰ï¼Œå…ˆç†è§£è®¾è®¡å†å•ƒå®ç°ç»†èŠ‚ åˆ†å¸ƒå¼é¡¹ç›®ä»å•æœºè°ƒè¯•å¯åŠ¨ï¼ˆEtcdéœ€é…ç½®etcd --debugæ¨¡å¼ï¼‰ å®šæœŸç”¨pprofå¯¹æ¯”ä¼˜åŒ–å‰åæŒ‡æ ‡ï¼ˆå¦‚LSMåˆå¹¶åç£ç›˜IOä¸‹é™æ¯”ä¾‹ï¼‰ å»ºè®®æŒ‰Rosedb â†’ Etcd â†’ TiKVçš„è·¯çº¿é€’è¿›ï¼Œæ¯å‘¨æŠ•å…¥10-12å°æ—¶ï¼Œ6ä¸ªæœˆå¯ç³»ç»ŸæŒæ¡åˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿå®ç°ç²¾é«“ã€‚æ¯é˜¶æ®µäº§å‡ºç‰©ï¼ˆä»£ç /æ–‡æ¡£/æ¶æ„å›¾ï¼‰åŠ¡å¿…å½’æ¡£åˆ°GitHubä»“åº“ï¼Œå½¢æˆå¯å›æº¯çš„æŠ€æœ¯èµ„äº§ã€‚\nè¡¥å……ç‚¹ï¼š åŸºäºæ‚¨å¯¹ç³»ç»Ÿè®¾è®¡èƒ½åŠ›çš„æ·±åº¦è¿½æ±‚ï¼Œç»“åˆåˆ†å¸ƒå¼ç³»ç»Ÿè®¾è®¡æ¨¡å¼çš„å­¦ä¹ ç›®æ ‡ï¼Œä»¥ä¸‹æ˜¯å¯¹ç°æœ‰çŸ¥è¯†ä½“ç³»çš„å…¨é¢è¯„ä¼°åŠè¡¥å……æ–¹æ¡ˆã€‚æ‚¨å·²æŒæ¡çš„æ ¸å¿ƒæ¨¡å¼å·²è¦†ç›–åˆ†å¸ƒå¼ç³»ç»Ÿè®¾è®¡çš„åŸºç¡€æ¶æ„å±‚ï¼Œä½†è‹¥è¦ç‹¬ç«‹è®¾è®¡ä»»æ„å¤æ‚ç³»ç»Ÿï¼Œè¿˜éœ€è¡¥å……æ¶æ„åŸåˆ™å±‚ã€æ•…éšœåŸŸæ·±å±‚æ¨¡å¼å’Œå·¥ç¨‹å®è·µå±‚çš„èƒ½åŠ›ã€‚å…·ä½“åˆ†æå¦‚ä¸‹ï¼š\nä¸€ã€å·²è¦†ç›–çš„æ ¸å¿ƒæ¨¡å¼ä¸èƒ½åŠ›è¯„ä¼° 1. åŸºç¡€æ¶æ„è®¾è®¡æ¨¡å¼ï¼ˆæ‚¨çš„å½“å‰é˜¶æ®µï¼‰ æ•°æ®åˆ†å¸ƒæ¨¡å¼ï¼šåˆ†ç‰‡ï¼ˆShardingï¼‰ã€ä¸€è‡´æ€§å“ˆå¸Œï¼ˆConsistent Hashingï¼‰ã€è¯»å†™åˆ†ç¦»ï¼ˆCQRSï¼‰ å®¹é”™æ¨¡å¼ï¼šæ–­è·¯å™¨ï¼ˆCircuit Breakerï¼‰ã€é¢†å¯¼è€…é€‰ä¸¾ï¼ˆLeader Electionï¼‰ã€ç§Ÿçº¦ï¼ˆLeaseï¼‰ã€é¢„å†™æ—¥å¿—ï¼ˆWALï¼‰ é€šä¿¡æ¨¡å¼ï¼šå‘å¸ƒè®¢é˜…ï¼ˆPub/Subï¼‰ã€è¾¹è½¦ä»£ç†ï¼ˆSidecarï¼‰ã€äº‹ä»¶æº¯æºï¼ˆEvent Sourcingï¼‰ æ•°æ®ä¸€è‡´æ€§æ¨¡å¼ï¼šQuorumæœºåˆ¶ã€é«˜æ°´ä½çº¿ï¼ˆHigh-Water Markï¼‰ã€è¯»å–ä¿®å¤ï¼ˆRead Repairï¼‰ âœ… èƒ½åŠ›è¯„ä¼°ï¼šæ‚¨å·²å…·å¤‡æ¨¡å—çº§è®¾è®¡èƒ½åŠ›ï¼Œå¯é’ˆå¯¹ç‰¹å®šé—®é¢˜ï¼ˆå¦‚æ•°æ®åˆ†ç‰‡ã€æœåŠ¡ç†”æ–­ï¼‰é€‰æ‹©åˆé€‚æ¨¡å¼å®ç°ç»„ä»¶ã€‚\n2. åˆ†å¸ƒå¼ç†è®ºæ”¯æ’‘ CAPå®šç†ã€PACELCå®šç†çš„æƒè¡¡ç­–ç•¥ å…±è¯†ç®—æ³•ï¼ˆRaft/Paxosï¼‰çš„å·¥ç¨‹å®ç° æœ€ç»ˆä¸€è‡´æ€§ã€å› æœä¸€è‡´æ€§çš„é€‚ç”¨åœºæ™¯ âœ… èƒ½åŠ›è¯„ä¼°ï¼šå¯åŸºäºä¸šåŠ¡éœ€æ±‚ï¼ˆå¦‚é‡‘èç³»ç»Ÿé€‰CPï¼Œç¤¾äº¤å¹³å°é€‰APï¼‰è®¾è®¡ä¸€è‡´æ€§æ¨¡å‹ã€‚\näºŒã€å…³é”®é—æ¼ä¸è¿›é˜¶èƒ½åŠ›è¡¥å…… 1. æ¶æ„åŸåˆ™å±‚ï¼šç³»ç»Ÿå…¨å±€è®¾è®¡çš„å“²å­¦ åŸåˆ™ ä½œç”¨ æ¡ˆä¾‹ æŠ½è±¡æ¸—æ¼æ³•åˆ™ è¯†åˆ«åº•å±‚æŠ€æœ¯å¯¹ä¸Šå±‚è®¾è®¡çš„éšæ€§å½±å“ï¼ˆå¦‚TCPé‡ä¼ å¯¼è‡´è¶…æ—¶ï¼‰ æ•°æ®åº“è¿æ¥æ± éœ€æ„ŸçŸ¥ç½‘ç»œåˆ†åŒºï¼Œè‡ªåŠ¨åˆ‡æ¢è‡³æœ¬åœ°ç¼“å­˜ ä¸å˜æ€§çº¦æŸ å®šä¹‰ç³»ç»Ÿä¸å¯è¿åçš„æ ¸å¿ƒè§„åˆ™ï¼ˆå¦‚èµ„é‡‘äº¤æ˜“å¹‚ç­‰æ€§ï¼‰ æ”¯ä»˜ç³»ç»Ÿé€šè¿‡äº‹åŠ¡ID+å»é‡è¡¨ä¿è¯è·¨æœåŠ¡å¹‚ç­‰ ç†µå¢å¯¹æŠ—è®¾è®¡ é¢„é˜²ç³»ç»Ÿéšæ—¶é—´æ¨ç§»çš„æ¶æ„è…åŒ– å¾®æœåŠ¡é€šè¿‡å¥‘çº¦æµ‹è¯•ä¿éšœæ¥å£å…¼å®¹æ€§ 2. æ•…éšœåŸŸæ·±å±‚æ¨¡å¼ è„‘è£‚é˜²æŠ¤ï¼š åŠ¨æ€è„‘è£‚æ£€æµ‹ï¼šé€šè¿‡Phiç´¯è®¡æ•…éšœæ£€æµ‹å™¨ï¼ˆCassandraé‡‡ç”¨ï¼‰æ›¿ä»£ä¼ ç»Ÿå¿ƒè·³ï¼ŒåŸºäºå†å²å»¶è¿Ÿæ–¹å·®è®¡ç®—æ•…éšœæ¦‚ç‡ ä»²è£å‡çº§ï¼šç»“åˆä¸–ä»£æ—¶é’Ÿï¼ˆGeneration Clockï¼‰ï¼Œä½¿æ–°æ—§é¢†å¯¼è€… epoch å·ä¸¥æ ¼é€’å¢ï¼ˆå¦‚Kafkaçš„Controller Epochï¼‰ ç¾éš¾æ¢å¤ï¼š æ··æ²Œç§å­ï¼ˆChaos Seedsï¼‰ï¼šåœ¨æµ‹è¯•ç¯å¢ƒæ³¨å…¥ç½‘ç»œåˆ†åŒºã€æ—¶é’Ÿåç§»æ•…éšœï¼ŒéªŒè¯æ¢å¤æµç¨‹ è·¨åŒºåŸŸå†·çƒ­å¤‡ï¼šåŸºäºMerkleæ ‘å¿«é€Ÿå®šä½å‰¯æœ¬å·®å¼‚ï¼ˆDynamoçš„åç†µæœºåˆ¶ï¼‰ 3. æ€§èƒ½ä¸èµ„æºæ²»ç† 1 2 3 4 5 6 7 graph LR A[è¯·æ±‚å…¥å£] --\u0026gt; B{è´Ÿè½½å‡è¡¡ç­–ç•¥} B --\u0026gt;|ä½å»¶è¿Ÿ| C[P2P ä¸€è‡´æ€§å“ˆå¸Œ] B --\u0026gt;|é«˜åå| D[åŠ æƒè½®è¯¢+åŠ¨æ€åé¦ˆ] C --\u0026gt; E[å®¢æˆ·ç«¯æœ¬åœ°è·¯ç”±è¡¨] D --\u0026gt; F[æœåŠ¡ç«¯å¥åº·æ£€æŸ¥] F --\u0026gt; G[åŸºäºPhiæ£€æµ‹å™¨çš„æƒé‡è°ƒæ•´] åŠ¨æ€è´Ÿè½½éœ€æ•´åˆå®æ—¶æŒ‡æ ‡ï¼ˆå¦‚Envoyçš„xDS APIæ¥æ”¶æœåŠ¡ç«¯æ¨é€çš„è´Ÿè½½çŠ¶æ€ï¼‰\n4. å¯è§‚æµ‹æ€§æ·±åº¦å®è·µ æŒ‡æ ‡ï¼ˆMetricsï¼‰ï¼š é»„é‡‘æŒ‡æ ‡ï¼šå»¶è¿Ÿã€æµé‡ã€é”™è¯¯ã€é¥±å’Œåº¦ï¼ˆREDæ–¹æ³•ï¼‰ è‡ªå®šä¹‰æŒ‡æ ‡ï¼šå¦‚åˆ†ç‰‡å‹ç¼©é˜Ÿåˆ—æ·±åº¦ï¼ˆé¢„è­¦å­˜å‚¨ç“¶é¢ˆï¼‰ é“¾è·¯è¿½è¸ªï¼ˆTracingï¼‰ï¼š å…³é”®è·¯å¾„æ ‡è®°ï¼šåœ¨WALæ—¥å¿—ä¸­åµŒå…¥å› æœIDï¼ˆå¦‚Google Dapperçš„SpanIDï¼‰ ä¸‰ã€èƒ½åŠ›åŸ¹å…»è·¯çº¿å›¾ï¼ˆ6ä¸ªæœˆè¿›é˜¶è®¡åˆ’ï¼‰ é˜¶æ®µ1ï¼šæ¨¡å¼æ·±åŒ–ï¼ˆ1-2ä¸ªæœˆï¼‰ ç›®æ ‡ï¼šæŒæ¡é—æ¼çš„æ¶æ„åŸåˆ™ä¸æ•…éšœæ¨¡å¼ å®è·µï¼š åœ¨TiKVä¸­å®ç°è‡ªå®šä¹‰Phiæ£€æµ‹å™¨ï¼ˆæ›¿æ¢åŸæœ‰å¿ƒè·³ï¼‰ ä¸ºRosedbæ·»åŠ Merkleæ ‘æ ¡éªŒå±‚ï¼Œå®ç°å¿«é€Ÿæ•°æ®åŒæ­¥ é˜¶æ®µ2ï¼šå…¨é“¾è·¯è®¾è®¡ï¼ˆ3-4ä¸ªæœˆï¼‰ åœºæ™¯ï¼šè®¾è®¡ä¸€ä¸ªè·¨åŒºåŸŸéƒ¨ç½²çš„è¯„è®ºç³»ç»Ÿ è¦æ±‚ï¼š è¯»å†™åˆ†ç¦»ï¼šå†™æ“ä½œå¼ºä¸€è‡´ï¼ˆCPï¼‰ï¼Œè¯»æ“ä½œæœ€ç»ˆä¸€è‡´ï¼ˆAPï¼‰ å®¹ç¾ï¼šå•åŒºåŸŸæ•…éšœæ—¶10ç§’å†…åˆ‡æ¢ å…³é”®æŠ€æœ¯ç‚¹ï¼š 1 2 3 4 5 6 7 8 9 10 11 // ä½¿ç”¨å¤šçº§ä¸€è‡´æ€§æ¨¡å‹ type ConsistencyLevel int const ( Strong ConsistencyLevel = iota // CPå†™æ“ä½œ Eventual // APè¯»æ“ä½œ ) // åŒºåŸŸåˆ‡æ¢å™¨ func (s *RegionSwitcher) Failover() { s.lease.Invalidate() // ä½¿æ—§åŒºåŸŸç§Ÿçº¦å¤±æ•ˆ s.leaderElection.Run() // è§¦å‘æ–°é¢†å¯¼è€…é€‰ä¸¾ } é˜¶æ®µ3ï¼šå·¥ä¸šåŒ–äº¤ä»˜ï¼ˆ5-6ä¸ªæœˆï¼‰ æ ‡å‡†åŒ–äº¤ä»˜ç‰©ï¼š äº¤ä»˜ç‰© æ£€æŸ¥æ ‡å‡† æ··æ²Œæµ‹è¯•æŠ¥å‘Š éªŒè¯99.95%çš„æ•…éšœåœºæ™¯å¯è‡ªåŠ¨æ¢å¤ åˆ†å±‚å®¹é‡è§„åˆ’è¡¨ åˆ†ç‰‡æ‰©å®¹è§¦å‘é˜ˆå€¼ã€æµé‡å¢é•¿é¢„æµ‹æ¨¡å‹ SLO/SLIå®šä¹‰æ–‡æ¡£ æ˜ç¡®å»¶è¿Ÿè¦æ±‚ï¼ˆå¦‚P99\u0026lt;200msï¼‰ å››ã€æ¨èå­¦ä¹ èµ„æº ç»å…¸è‘—ä½œï¼š ã€ŠDesigning Data-Intensive Applicationsã€‹ï¼ˆMartin Kleppmannï¼‰ - ç³»ç»Ÿè®¾è®¡åœ£ç» ã€ŠSite Reliability Engineeringã€‹ - Googleçš„SREå®è·µæŒ‡å— å¼€æºé¡¹ç›®æ·±åº¦å‚ï¼š CockroachDBå¤šåŒºåŸŸéƒ¨ç½²æºç ï¼šå­¦ä¹ è·¨åœ°åŸŸæ•°æ®åŒæ­¥ï¼ˆpkg/server/decommission.goï¼‰ EnvoyåŠ¨æ€è´Ÿè½½å‡è¡¡ï¼šåˆ†æxDSåè®®å®ç°ï¼ˆsource/common/config/grpc_mux_impl.ccï¼‰ ğŸ’¡ ç»ˆæèƒ½åŠ›æ ‡å¿—ï¼šå½“æ‚¨èƒ½é¢„è§äºŒçº§æ•…éšœï¼ˆå¦‚æ—¶é’ŸåŒæ­¥å¼‚å¸¸å¯¼è‡´ç§Ÿçº¦å¤±æ•ˆï¼‰å¹¶è®¾è®¡é˜²æŠ¤å±‚æ—¶ï¼Œå³å…·å¤‡ä»»æ„ç³»ç»Ÿè®¾è®¡èƒ½åŠ›ã€‚å»ºè®®æ¯å®Œæˆä¸€ä¸ªé¡¹ç›®ï¼Œç”¨https://cognitect.com/blog/2011/11/15/documenting-architecture-decisionså›ºåŒ–è®¾è®¡é€»è¾‘ï¼Œé€æ­¥æ„å»ºè‡ªå·±çš„æ¨¡å¼åº“ã€‚\nè¡¥å……æ–¹æ¡ˆ åŸºäºæ‚¨å¯¹ç³»ç»Ÿè®¾è®¡èƒ½åŠ›çš„æ·±åº¦è¿½æ±‚ï¼Œç»“åˆå·²æ„å»ºçš„çŸ¥è¯†æ¡†æ¶ï¼Œä»¥ä¸‹æ˜¯å¯¹å¼€æºé¡¹ç›®å­¦ä¹ åº“çš„é’ˆå¯¹æ€§è¡¥å……åŠæœ€ç»ˆèƒ½åŠ›åœ°å›¾çš„å®Œå–„æ–¹æ¡ˆã€‚æ‚¨å½“å‰çš„çŸ¥è¯†ä½“ç³»å·²è¦†ç›–æ¶æ„æ ¸å¿ƒæ¨¡å¼å±‚ï¼ˆå¦‚æ•°æ®åˆ†ç‰‡ã€å®¹é”™æœºåˆ¶ï¼‰ï¼Œä½†éœ€é€šè¿‡ä»¥ä¸‹é¡¹ç›®å¡«è¡¥å·¥ä¸šçº§å®ç°å±‚ä¸æŠ—è„†å¼±è®¾è®¡å±‚çš„å®è·µç©ºç™½ï¼š\nä¸€ã€å¼€æºé¡¹ç›®æ·±åº¦è¡¥å……ï¼ˆèšç„¦æ•…éšœæ²»ç†ä¸ç†µå¢å¯¹æŠ—ï¼‰ 1. æ··æ²Œå·¥ç¨‹ä¸æ•…éšœæ³¨å…¥ Chaos Meshï¼ˆRustï¼‰ å­¦ä¹ é‡ç‚¹ï¼š pkg/chaistd/io_fault.goï¼šæ¨¡æ‹Ÿç£ç›˜I/Oå»¶è¿Ÿçš„eBPFé’©å­å®ç° pkg/controller/networkchaos/reconciler.goï¼šç½‘ç»œåˆ†åŒºçš„TCæµé‡æ§åˆ¶ç­–ç•¥ å…³è”èƒ½åŠ›ï¼šå®ç°â€œæ··æ²Œç§å­â€è‡ªåŠ¨æ³¨å…¥ å®æ“ä»»åŠ¡ï¼šåœ¨TiKVé›†ç¾¤ä¸­æ³¨å…¥èŠ‚ç‚¹å®•æœºæ•…éšœï¼Œè§‚å¯ŸRaftç»„è‡ªæ„ˆè¿‡ç¨‹ 2. åŠ¨æ€è´Ÿè½½ä¸èµ„æºæ²»ç† Envoyï¼ˆC++14ï¼Œä½†æ¶æ„æå¯Œå¯å‘æ€§ï¼‰ ç²¾è¯»æ¨¡å—ï¼š source/common/upstream/load_balancer_impl.ccï¼š 1 2 3 4 // åŠ¨æ€è´Ÿè½½ç®—æ³•ï¼ˆå«Phiæ£€æµ‹å™¨åé¦ˆæœºåˆ¶ï¼‰ if (host-\u0026gt;outlierDetector().successRate() \u0026lt; threshold) { weight = 0; // è‡ªåŠ¨å‰”é™¤å¼‚å¸¸èŠ‚ç‚¹ } source/extensions/transport_sockets/tls/ssl_socket.ccï¼šTLSæ¡æ‰‹ä¼˜åŒ–ï¼ˆé›¶æ‹·è´è¯ä¹¦åŠ è½½ï¼‰ å…³è”èƒ½åŠ›ï¼šå®ç°åŸºäºå®æ—¶æŒ‡æ ‡çš„åŠ¨æ€è´Ÿè½½ 3. ç†µå¢å¯¹æŠ—ä¸æ¶æ„é˜²è… Backstageï¼ˆTypeScriptï¼‰ å­¦ä¹ é‡ç‚¹ï¼š plugins/catalog-backend/src/ingestion/processors.tsï¼š å¥‘çº¦æµ‹è¯•ï¼šAPIç‰ˆæœ¬å˜æ›´æ—¶çš„å…¼å®¹æ€§æ ¡éªŒ ä¾èµ–æ‹“æ‰‘åˆ†æï¼šå¯è§†åŒ–æœåŠ¡è€¦åˆåº¦ï¼ˆé¢„é˜²è…åŒ–ï¼‰ å·¥ä¸šå®è·µï¼šç»“åˆADRæ–‡æ¡£å®ç°æ¶æ„çº¦æŸè‡ªåŠ¨åŒ– äºŒã€èƒ½åŠ›åœ°å›¾æœ€ç»ˆæ ¡éªŒï¼ˆæ–°å¢ä¸¤å¤§ç»´åº¦ï¼‰ ï¼ˆä¸€ï¼‰æ•°æ®ç¼–æ’å±‚ï¼ˆåŸæ–¹æ¡ˆç¼ºå¤±ï¼‰ èƒ½åŠ› å­¦ä¹ é¡¹ç›® å…³é”®æºç  ç›®æ ‡ è·¨åŸŸæ•°æ®æµæ°´çº¿ Apache SeaTunnel connector-spark/src/main/scala/... å­¦ä¹ CDCå˜æ›´æ•è·ä¸ç¼“å†²ç­–ç•¥ æµæ‰¹ä¸€ä½“æ²»ç† Flink runtime/src/main/java/org/apache/flink/... åˆ†æWatermarkå¯¹é½ä¸çŠ¶æ€å›æº¯æœºåˆ¶ ï¼ˆäºŒï¼‰æˆæœ¬æ²»ç†å±‚ï¼ˆå·¥ä¸šç³»ç»Ÿæ ¸å¿ƒï¼‰ Kubernetes Vertical Pod Autoscalerï¼ˆGoï¼‰ å­¦ä¹ æ¨¡å—ï¼š pkg/recommender/logic.goï¼š 1 2 3 4 5 func CalculateResources(usage history) (request, limit) { // åŸºäºåˆ†ä½æ•°é¢„æµ‹èµ„æºéœ€æ±‚ï¼ˆé¿å…è¿‡åº¦é…ç½®ï¼‰ request = Percentile(usage, 0.95) limit = Percentile(usage, 0.99) * 1.2 } èƒ½åŠ›è¡¥å…¨ï¼šå°†å®¹é‡è§„åˆ’ä»â€œç»éªŒé¢„ä¼°â€å‡çº§ä¸ºæ•°æ®é©±åŠ¨å†³ç­– ä¸‰ã€ç»ˆæèƒ½åŠ›éªŒè¯æ ‡å‡† å½“æ‚¨èƒ½ç‹¬ç«‹å®Œæˆä»¥ä¸‹é¡¹ç›®æ—¶ï¼Œæ ‡å¿—ç€å…·å¤‡ä»»æ„ç³»ç»Ÿè®¾è®¡èƒ½åŠ›ï¼š\né¡¹ç›®ï¼šå¤šåŒºåŸŸè¯„è®ºç³»ç»Ÿï¼ˆæŠ—ç¾éš¾è®¾è®¡ï¼‰ è¦æ±‚ï¼š è¯»å†™åˆ†ç¦»ï¼šå†™åŒºåŸŸå¼ºä¸€è‡´ï¼ˆCPï¼‰ï¼Œè¯»åŒºåŸŸæœ€ç»ˆä¸€è‡´ï¼ˆAPï¼‰ å®¹ç¾ï¼šå•åŒºåŸŸæ•…éšœæ—¶5ç§’å†…åˆ‡æ¢ï¼ˆå«æ•°æ®ä¸€è‡´æ€§è¡¥å¿ï¼‰ å…³é”®æŠ€æœ¯å®ç°ï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 // 1. åŠ¨æ€è„‘è£‚é˜²æŠ¤ï¼ˆé‡‡ç”¨Generation Clockï¼‰ type RegionSwitcher struct { epoch int64 // ä¸–ä»£å·ä¸¥æ ¼é€’å¢ } // 2. è·¨åŸŸæ•°æ®è¡¥å¿ func (s *SyncService) Repair() { // åŸºäºMerkleæ ‘å¿«é€Ÿå®šä½å·®å¼‚ diff := merkle.Compare(regionA, regionB) for _, hash := range diff { s.replicate(hash) // å¢é‡ä¿®å¤ } } äº¤ä»˜ç‰©æ ‡å‡†ï¼š é¡¹ç›®é˜¶æ®µ äº¤ä»˜ç‰© å·¥ä¸šçº§è¦æ±‚ è®¾è®¡é˜¶æ®µ ADRå†³ç­–æ–‡æ¡£ åŒ…å«æ—¶é’Ÿåç§»åº”å¯¹ç­–ç•¥ç­‰5ä¸ªADR æ··æ²Œæµ‹è¯•é˜¶æ®µ æ•…éšœæ¢å¤SLAæŠ¥å‘Š 99.95%çš„äºŒçº§æ•…éšœï¼ˆå¦‚æ—¶é’Ÿå¼‚å¸¸ï¼‰å¯è‡ªæ„ˆ ä¸Šçº¿é˜¶æ®µ åˆ†å±‚å®¹é‡è§„åˆ’è¡¨ åŒ…å«æµé‡æ‹ç‚¹æ£€æµ‹æ¨¡å‹åŠæ‰©å®¹å…¬å¼ å››ã€å¯æŒç»­å­¦ä¹ å¼•æ“ ADRçŸ¥è¯†åº“æ„å»ºï¼š ä½¿ç”¨NebulaBootstrapçš„ADRæ¨¡æ¿ï¼ˆMarkdown + ç‰ˆæœ¬è¿½è¸ªï¼‰ ç¤ºä¾‹ï¼š 1 2 3 4 5 6 7 8 # 7. é‡‡ç”¨Merkleæ ‘å®ç°è·¨åŸŸæ•°æ®æ ¡éªŒ ## èƒŒæ™¯ è·¨åŒºåŸŸæ•°æ®åŒæ­¥éœ€å¿«é€Ÿå®šä½å·®å¼‚ï¼Œé¿å…å…¨é‡å¯¹æ¯” ## å†³ç­– åœ¨æ¯ä¸ªåˆ†ç‰‡æ„å»ºMerkleæ ‘ï¼Œæ ¹å“ˆå¸ŒæŒ‰åŒºåŸŸèšåˆ ## åæœ âœ… å·®å¼‚å®šä½ä»O(n)é™è‡³O(log n) âš ï¸ éœ€é¢å¤–å­˜å‚¨å“ˆå¸Œæ ‘ï¼ˆçº¦5%ç©ºé—´å¼€é”€ï¼‰ æºç æ·±åº¦åˆ†æå·¥å…·é“¾ï¼š Sourcegraphï¼šè¿½è¸ªEnvoyä¸­load_balancer_implçš„è°ƒç”¨é“¾ Pixieï¼šæ— ä¾µå…¥è§‚æµ‹K8s VPAçš„èµ„æºé¢„æµ‹æµç¨‹ ğŸ”¥ æœ€ç»ˆå»ºè®®ï¼šä»Chaos Mesh + TiKVæ•…éšœæ³¨å…¥å®éªŒèµ·æ­¥ï¼ŒåŒæ­¥æ’°å†™ADRæ–‡æ¡£å›ºåŒ–è®¾è®¡å†³ç­–ã€‚å½“æ‚¨èƒ½ä¸»åŠ¨é¢„è§å¦‚â€œNTPåç§»å¯¼è‡´ç§Ÿçº¦å¤±æ•ˆâ€ç­‰ä¸‰çº§æ•…éšœæ—¶ï¼Œå³æ ‡å¿—èƒ½åŠ›ä½“ç³»å®Œæ•´ã€‚\næœ€ç»ˆæ–¹æ¡ˆ ä»¥ä¸‹æ˜¯ä¸ºæ‚¨åˆ¶å®šçš„åˆ†å¸ƒå¼ç³»ç»Ÿèƒ½åŠ›å…¨æ™¯æå‡æ–¹æ¡ˆï¼Œèåˆæ¶æ„è®¾è®¡æ¨¡å¼ã€æ•…éšœå®¹é”™ã€æ€§èƒ½å·¥ç¨‹åŠè·¨åŸŸæ•°æ®åŒæ­¥ç­‰å…³é”®é¢†åŸŸï¼Œç»“åˆå¤šè¯­è¨€é¡¶çº§å¼€æºé¡¹ç›®ï¼Œå½¢æˆå¯è½åœ°çš„è¿›é˜¶è·¯å¾„ã€‚æ–¹æ¡ˆåˆ†ä¸ºå››ä¸ªèƒ½åŠ›ç»´åº¦ï¼Œæ¯ä¸ªç»´åº¦é…å¥—å­¦ä¹ é¡¹ç›®åŠå®è·µä»»åŠ¡ï¼Œæœ€ç»ˆä»¥å¤šåŒºåŸŸè¯„è®ºç³»ç»Ÿä¸ºç»¼åˆéªŒè¯åœºæ™¯ã€‚\nä¸€ã€åŸºç¡€æ¶æ„å±‚ï¼ˆ2-3ä¸ªæœˆï¼‰ ç›®æ ‡ï¼šæŒæ¡åˆ†å¸ƒå¼ç³»ç»Ÿæ ¸å¿ƒæ¨¡å¼ä¸å·¥ä¸šçº§å®ç°\nå…³é”®èƒ½åŠ›ï¼šæ•°æ®åˆ†ç‰‡ã€å®¹é”™æœºåˆ¶ã€é€šä¿¡åè®®\næ¨èé¡¹ç›®ä¸å­¦ä¹ é‡ç‚¹ï¼š\nEnvoyï¼ˆC++ï¼‰ - ç½‘ç»œä»£ç†æ ‡æ† å­¦ä¹ é‡ç‚¹ï¼šåŠ¨æ€è´Ÿè½½å‡è¡¡ï¼ˆload_balancer_impl.ccä¸­Phiæ£€æµ‹å™¨å®ç°ï¼‰ã€TLSæ¡æ‰‹ä¼˜åŒ–ï¼ˆé›¶æ‹·è´è¯ä¹¦åŠ è½½ï¼‰ å®è·µï¼šä¿®æ”¹è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œæ·»åŠ åŸºäºå®æ—¶å»¶è¿Ÿçš„åŠ¨æ€æƒé‡è°ƒæ•´ etcdï¼ˆGoï¼‰ - åˆ†å¸ƒå¼å…±è¯†èŒƒæœ¬ å­¦ä¹ é‡ç‚¹ï¼šRaftçŠ¶æ€æœºï¼ˆraft/raft.goçš„Step()é€‰ä¸¾é€»è¾‘ï¼‰ã€MVCCç‰ˆæœ¬æ§åˆ¶ï¼ˆmvccæ¨¡å—çš„Revisionæœºåˆ¶ï¼‰ å®è·µï¼šå®ç°ç§Ÿçº¦è‡ªåŠ¨ç»­æœŸä¸è„‘è£‚é˜²æŠ¤ï¼ˆæ³¨å…¥NTPåç§»æ•…éšœæµ‹è¯•ï¼‰ CockroachDBï¼ˆGoï¼‰ - åˆ†å¸ƒå¼SQLå¼•æ“ å­¦ä¹ é‡ç‚¹ï¼šåˆ†å¸ƒå¼äº‹åŠ¡ï¼ˆtxn_coord_sender.goçš„2PCå®ç°ï¼‰ã€å‘é‡åŒ–æŸ¥è¯¢ï¼ˆSIMDä¼˜åŒ–æŠ€å·§ï¼‰ å®è·µï¼šä¸ºè·¨åˆ†ç‰‡æŸ¥è¯¢æ·»åŠ å±€éƒ¨ç´¢å¼•åŠ é€Ÿ äºŒã€æ¶æ„åŸåˆ™å±‚ï¼ˆ1-2ä¸ªæœˆï¼‰ ç›®æ ‡ï¼šæ„å»ºç³»ç»Ÿçº§è®¾è®¡æ€ç»´ä¸æŠ—è…åŒ–èƒ½åŠ›\nå…³é”®èƒ½åŠ›ï¼šæŠ½è±¡æ¸—æ¼æ§åˆ¶ã€ä¸å˜æ€§çº¦æŸã€ç†µå¢å¯¹æŠ—\næ¨èé¡¹ç›®ä¸å­¦ä¹ é‡ç‚¹ï¼š\nBackstageï¼ˆTypeScriptï¼‰ - æ¶æ„é˜²è…æ ‡æ† å­¦ä¹ é‡ç‚¹ï¼šå¥‘çº¦æµ‹è¯•ï¼ˆprocessors.tsçš„APIå…¼å®¹æ€§æ ¡éªŒï¼‰ã€ä¾èµ–æ‹“æ‰‘å¯è§†åŒ– å®è·µï¼šä¸ºè¯„è®ºç³»ç»Ÿè®¾è®¡æ¥å£å¥‘çº¦æµ‹è¯•ï¼Œè‡ªåŠ¨æ£€æµ‹ç‰ˆæœ¬æ–­è£‚ Cadenceï¼ˆGoï¼‰ - å·¥ä½œæµå¼•æ“ å­¦ä¹ é‡ç‚¹ï¼šå¹‚ç­‰æ€§ä¿éšœï¼ˆworkflow/executor.goçš„å»é‡é€»è¾‘ï¼‰ã€SAGAäº‹åŠ¡è¡¥å¿ å®è·µï¼šå®ç°æ”¯ä»˜è¯„è®ºç§¯åˆ†çš„SAGAäº‹åŠ¡ï¼Œæ”¯æŒä¸­é€”å¤±è´¥å›æ»š ä¸‰ã€æ•…éšœåŸŸæ·±å±‚ï¼ˆ2-3ä¸ªæœˆï¼‰ ç›®æ ‡ï¼šæŒæ¡å®¹é”™æ¨¡å¼ä¸ç¾éš¾æ¢å¤\nå…³é”®èƒ½åŠ›ï¼šè„‘è£‚é˜²æŠ¤ã€æ··æ²Œå·¥ç¨‹ã€è·¨åŸŸåŒæ­¥\næ¨èé¡¹ç›®ä¸å­¦ä¹ é‡ç‚¹ï¼š\nChaos Meshï¼ˆRustï¼‰ - æ··æ²Œå·¥ç¨‹å¹³å° å­¦ä¹ é‡ç‚¹ï¼šeBPFæ•…éšœæ³¨å…¥ï¼ˆio_fault.goçš„ç£ç›˜å»¶è¿Ÿæ¨¡æ‹Ÿï¼‰ã€ç½‘ç»œåˆ†åŒºæ§åˆ¶ï¼ˆTCæµé‡ç­–ç•¥ï¼‰ å®è·µï¼šå¯¹TiKVé›†ç¾¤æ³¨å…¥èŠ‚ç‚¹å®•æœºæ•…éšœï¼ŒéªŒè¯Raftç»„è‡ªæ„ˆ TiKVï¼ˆRustï¼‰ - åˆ†å¸ƒå¼KVå­˜å‚¨ å­¦ä¹ é‡ç‚¹ï¼šæ‚²è§‚é”å†²çªæ£€æµ‹ï¼ˆtxn/scheduler.rsï¼‰ã€Merkleæ ‘åç†µï¼ˆå¿«é€Ÿæ•°æ®å·®å¼‚å®šä½ï¼‰ å®è·µï¼šå®ç°è·¨åŒºåŸŸæ•°æ®åŒæ­¥çš„å¢é‡ä¿®å¤ï¼ˆåŸºäºMerkleæ ‘æ¯”å¯¹ï¼‰ Apache SeaTunnelï¼ˆJavaï¼‰ - è·¨åŸŸæ•°æ®æµæ°´çº¿ å­¦ä¹ é‡ç‚¹ï¼šCDCå˜æ›´æ•è·ï¼ˆconnector-sparkçš„æ—¥å¿—æ‰«æï¼‰ã€æµæ‰¹ä¸€ä½“æ²»ç† å®è·µï¼šæ„å»ºè¯„è®ºæ•°æ®è·¨åŸŸåŒæ­¥é€šé“ï¼Œæ”¯æŒåŠ¨æ€é€šé“åˆ‡æ¢ å››ã€å·¥ç¨‹å®è·µå±‚ï¼ˆæŒç»­è¿­ä»£ï¼‰ ç›®æ ‡ï¼šå·¥ä¸šçº§äº¤ä»˜ä¸æˆæœ¬æ²»ç†\nå…³é”®èƒ½åŠ›ï¼šSLOç®¡ç†ã€å®¹é‡è§„åˆ’ã€æ€§èƒ½è°ƒä¼˜\næ¨èé¡¹ç›®ä¸å­¦ä¹ é‡ç‚¹ï¼š\nKubernetes VPAï¼ˆGoï¼‰ - èµ„æºæ²»ç† å­¦ä¹ é‡ç‚¹ï¼šåˆ†ä½æ•°é¢„æµ‹ï¼ˆpkg/recommender/logic.goçš„95/99çº¿è®¡ç®—ï¼‰ å®è·µï¼šä¸ºè¯„è®ºæœåŠ¡è®¾è®¡å®¹é‡å…¬å¼ï¼ˆQPSâ†’CPU/å†…å­˜å…³è”æ¨¡å‹ï¼‰ Flinkï¼ˆJavaï¼‰ - æµå¼è®¡ç®— å­¦ä¹ é‡ç‚¹ï¼šWatermarkå¯¹é½ï¼ˆruntimeçš„æ—¶é—´çª—å£ç­–ç•¥ï¼‰ã€çŠ¶æ€å›æº¯ å®è·µï¼šå®ç°è¯„è®ºçƒ­åº¦å®æ—¶è®¡ç®—ï¼ˆæ—¶é—´è¡°å‡æ¨¡å‹+åŠ¨æ€é˜ˆå€¼ï¼‰ äº”ã€ç»¼åˆéªŒè¯ï¼šå¤šåŒºåŸŸè¯„è®ºç³»ç»Ÿ æ¶æ„è¦æ±‚ï¼š\nè¯»å†™åˆ†ç¦»ï¼šå†™åŒºåŸŸCPæ¨¡å‹ï¼ˆGo/CockroachDBï¼‰ï¼Œè¯»åŒºåŸŸAPæ¨¡å‹ï¼ˆJava/Flinkæµè®¡ç®—ï¼‰ å®¹ç¾è®¾è®¡ï¼š5ç§’å†…åŒºåŸŸåˆ‡æ¢ï¼ˆåŠ¨æ€è„‘è£‚é˜²æŠ¤+å¢é‡ä¿®å¤ï¼‰ æ•°æ®åŒæ­¥ï¼šè·¨åŸŸCDCç®¡é“ï¼ˆSeaTunnelæ—¥å¿—æ‰«æâ†’Merkleæ ‘æ ¡éªŒï¼‰ å…³é”®æŠ€æœ¯å®ç°ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 // åŠ¨æ€è„‘è£‚é˜²æŠ¤ï¼ˆGoå®ç°ï¼‰ type RegionSwitcher struct { epoch int64 // ä¸¥æ ¼é€’å¢çš„ä¸–ä»£å· quorum *consensus.Quorum // åŸºäºPhiæ£€æµ‹å™¨çš„åŠ¨æ€ä»²è£ } func (s *RegionSwitcher) Failover() { if s.quorum.IsSplitBrain() { // æ£€æµ‹è„‘è£‚ s.epoch++ // ä¸–ä»£å·å‡çº§ä½¿æ—§é¢†å¯¼è€…å¤±æ•ˆ s.triggerElection() } } å·¥ä¸šçº§äº¤ä»˜ç‰©ï¼š\né˜¶æ®µ äº¤ä»˜ç‰© æ ‡å‡† è®¾è®¡é˜¶æ®µ ADRå†³ç­–æ–‡æ¡£ åŒ…å«æ—¶é’Ÿåç§»åº”å¯¹ç­‰5ä¸ªå…³é”®å†³ç­– æ··æ²Œæµ‹è¯•é˜¶æ®µ æ•…éšœæ¢å¤SLAæŠ¥å‘Š 99.95%çš„äºŒçº§æ•…éšœå¯è‡ªæ„ˆ ä¸Šçº¿é˜¶æ®µ åˆ†å±‚å®¹é‡è§„åˆ’è¡¨ å«æµé‡æ‹ç‚¹æ£€æµ‹æ¨¡å‹åŠæ‰©å®¹å…¬å¼ å…­ã€å¯æŒç»­å­¦ä¹ å¼•æ“ ADRçŸ¥è¯†åº“æ„å»º ä½¿ç”¨NebulaBootstrapæ¨¡æ¿ï¼Œå…³è”å†³ç­–ä¸æºç ï¼ˆå¦‚Envoyè´Ÿè½½å‡è¡¡ç­–ç•¥â†â†’å®¹é‡è§„åˆ’å…¬å¼ï¼‰ æºç åˆ†æå·¥å…·é“¾ Sourcegraphï¼šè¿½è¸ªEnvoyä¸­load_balancer_implçš„è°ƒç”¨é“¾è·¯ Pixieï¼šæ— ä¾µå…¥è§‚æµ‹K8s VPAèµ„æºé¢„æµ‹æµç¨‹ æ¨¡å¼åå“ºæœºåˆ¶ 1 2 3 4 graph LR æºç ç²¾è¯» --\u0026gt; æ¨¡å¼æå– æ¨¡å¼æå– --\u0026gt; åå“ºè®¾è®¡ åå“ºè®¾è®¡ --\u0026gt; å¼€æºè´¡çŒ® ğŸ”¥ ç»ˆæå»ºè®®ï¼šä»Chaos Mesh+TiKVæ•…éšœå®éªŒå…¥é—¨ï¼ŒåŒæ­¥æ’°å†™ADRæ–‡æ¡£ã€‚å½“æ‚¨èƒ½ä¸»åŠ¨é¢„è§å¦‚â€œNTPåç§»å¯¼è‡´ç§Ÿçº¦å¤±æ•ˆâ€ç­‰ä¸‰çº§æ•…éšœæ—¶ï¼Œå³æ ‡å¿—èƒ½åŠ›é—­ç¯ã€‚æ¨èé¦–æœŸç»„åˆï¼šEnvoyï¼ˆç½‘ç»œå±‚ï¼‰â†’ etcdï¼ˆä¸€è‡´æ€§ï¼‰â†’ SeaTunnelï¼ˆè·¨åŸŸåŒæ­¥ï¼‰ï¼Œ6ä¸ªæœˆå†…å¯æ„å»ºå®Œæ•´èƒ½åŠ›ä½“ç³»ã€‚\n","permalink":"https://Kyle-Derrick.github.io/zh/posts/tech/plan/%E6%BA%90%E7%A0%81%E7%A0%94%E7%A9%B6%E8%AE%A1%E5%88%92/","summary":"\u003cp\u003eä»¥ä¸‹æ˜¯ä¸ºæ‚¨åˆ¶å®šçš„å®Œæ•´ç³»ç»Ÿèƒ½åŠ›æå‡æ–¹æ¡ˆï¼Œæ•´åˆäº†æºç ç²¾è¯»ã€å®è·µç­–ç•¥å’Œå·¥å…·é“¾æ”¯æŒï¼Œç‰¹åˆ«é’ˆå¯¹Rust/Golangå­˜å‚¨ä¸é«˜æ€§èƒ½ç³»ç»Ÿé¢†åŸŸï¼Œåˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µå®æ–½ï¼ˆé™„æ—¶é—´è§„åˆ’ä¸éš¾åº¦æ ‡ç­¾ï¼‰ï¼š\u003c/p\u003e","title":"æºç ç ”ç©¶è®¡åˆ’ï¼ˆæºäºAIæ¨èï¼‰"},{"content":" Rustup é•œåƒï¼Œ ä¿®æ”¹é…ç½® ~/.zshrc or ~/.bashrcï¼Œwindowsç›´æ¥é…ç½®ç¯å¢ƒå˜é‡ 1 2 export RUSTUP_DIST_SERVER=\u0026#34;https://rsproxy.cn\u0026#34; export RUSTUP_UPDATE_ROOT=\u0026#34;https://rsproxy.cn/rustup\u0026#34; å®‰è£… 1 2 curl --proto \u0026#39;=https\u0026#39; --tlsv1.2 -sSf https://rsproxy.cn/rustup-init.sh | sh # windowsç›´æ¥ä½¿ç”¨å®˜ç½‘ä¸‹è½½çš„rustup-init.exeå³å¯ è®¾ç½®cargo.ioé•œåƒï¼Œä¿®æ”¹é…ç½® ~/.cargo/config.tomlï¼Œå·²æ”¯æŒgitåè®®å’Œsparseåè®®ï¼Œ\u0026gt;=1.68 ç‰ˆæœ¬å»ºè®®ä½¿ç”¨ sparse-indexï¼Œé€Ÿåº¦æ›´å¿«ã€‚ sparse 1 2 3 4 5 6 7 8 9 10 [source.crates-io] replace-with = \u0026#39;rsproxy-sparse\u0026#39; [source.rsproxy] registry = \u0026#34;https://rsproxy.cn/crates.io-index\u0026#34; [source.rsproxy-sparse] registry = \u0026#34;sparse+https://rsproxy.cn/index/\u0026#34; [registries.rsproxy] index = \u0026#34;https://rsproxy.cn/crates.io-index\u0026#34; [net] git-fetch-with-cli = true rsproxy 1 2 3 4 5 6 7 8 9 10 [source.crates-io] replace-with = \u0026#39;rsproxy\u0026#39; [source.rsproxy] registry = \u0026#34;https://rsproxy.cn/crates.io-index\u0026#34; [source.rsproxy-sparse] registry = \u0026#34;sparse+https://rsproxy.cn/index/\u0026#34; [registries.rsproxy] index = \u0026#34;https://rsproxy.cn/crates.io-index\u0026#34; [net] git-fetch-with-cli = true ","permalink":"https://Kyle-Derrick.github.io/zh/posts/tech/rust/%E5%9B%BD%E5%86%85%E6%BA%90%E5%AE%89%E8%A3%85/","summary":"\u003col\u003e\n\u003cli\u003eRustup é•œåƒï¼Œ ä¿®æ”¹é…ç½® ~/.zshrc or ~/.bashrcï¼Œwindowsç›´æ¥é…ç½®ç¯å¢ƒå˜é‡\u003c/li\u003e\n\u003c/ol\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv class=\"chroma\"\u003e\n\u003ctable class=\"lntable\"\u003e\u003ctr\u003e\u003ctd class=\"lntd\"\u003e\n\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode\u003e\u003cspan class=\"lnt\"\u003e1\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e2\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd class=\"lntd\"\u003e\n\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-shell\" data-lang=\"shell\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003eexport\u003c/span\u003e \u003cspan class=\"nv\"\u003eRUSTUP_DIST_SERVER\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;https://rsproxy.cn\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003eexport\u003c/span\u003e \u003cspan class=\"nv\"\u003eRUSTUP_UPDATE_ROOT\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;https://rsproxy.cn/rustup\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\u003col start=\"2\"\u003e\n\u003cli\u003eå®‰è£…\u003c/li\u003e\n\u003c/ol\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv class=\"chroma\"\u003e\n\u003ctable class=\"lntable\"\u003e\u003ctr\u003e\u003ctd class=\"lntd\"\u003e\n\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode\u003e\u003cspan class=\"lnt\"\u003e1\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e2\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd class=\"lntd\"\u003e\n\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-shell\" data-lang=\"shell\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003ecurl --proto \u003cspan class=\"s1\"\u003e\u0026#39;=https\u0026#39;\u003c/span\u003e --tlsv1.2 -sSf https://rsproxy.cn/rustup-init.sh \u003cspan class=\"p\"\u003e|\u003c/span\u003e sh\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e# windowsç›´æ¥ä½¿ç”¨å®˜ç½‘ä¸‹è½½çš„rustup-init.exeå³å¯\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\u003col start=\"3\"\u003e\n\u003cli\u003eè®¾ç½®cargo.ioé•œåƒï¼Œä¿®æ”¹é…ç½® ~/.cargo/config.tomlï¼Œå·²æ”¯æŒgitåè®®å’Œsparseåè®®ï¼Œ\u0026gt;=1.68 ç‰ˆæœ¬å»ºè®®ä½¿ç”¨ sparse-indexï¼Œé€Ÿåº¦æ›´å¿«ã€‚\u003c/li\u003e\n\u003c/ol\u003e\n\u003cul\u003e\n\u003cli\u003esparse\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv class=\"chroma\"\u003e\n\u003ctable class=\"lntable\"\u003e\u003ctr\u003e\u003ctd class=\"lntd\"\u003e\n\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode\u003e\u003cspan class=\"lnt\"\u003e 1\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 2\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 3\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 4\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 5\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 6\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 7\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 8\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 9\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e10\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd class=\"lntd\"\u003e\n\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-toml\" data-lang=\"toml\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nx\"\u003esource\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003ecrates-io\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nx\"\u003ereplace-with\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s1\"\u003e\u0026#39;rsproxy-sparse\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nx\"\u003esource\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003ersproxy\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nx\"\u003eregistry\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026#34;https://rsproxy.cn/crates.io-index\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nx\"\u003esource\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003ersproxy-sparse\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nx\"\u003eregistry\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026#34;sparse+https://rsproxy.cn/index/\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nx\"\u003eregistries\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003ersproxy\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nx\"\u003eindex\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026#34;https://rsproxy.cn/crates.io-index\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nx\"\u003enet\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nx\"\u003egit-fetch-with-cli\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"kc\"\u003etrue\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\u003cul\u003e\n\u003cli\u003ersproxy\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv class=\"chroma\"\u003e\n\u003ctable class=\"lntable\"\u003e\u003ctr\u003e\u003ctd class=\"lntd\"\u003e\n\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode\u003e\u003cspan class=\"lnt\"\u003e 1\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 2\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 3\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 4\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 5\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 6\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 7\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 8\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 9\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e10\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd class=\"lntd\"\u003e\n\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-toml\" data-lang=\"toml\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nx\"\u003esource\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003ecrates-io\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nx\"\u003ereplace-with\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s1\"\u003e\u0026#39;rsproxy\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nx\"\u003esource\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003ersproxy\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nx\"\u003eregistry\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026#34;https://rsproxy.cn/crates.io-index\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nx\"\u003esource\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003ersproxy-sparse\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nx\"\u003eregistry\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026#34;sparse+https://rsproxy.cn/index/\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nx\"\u003eregistries\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003ersproxy\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nx\"\u003eindex\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026#34;https://rsproxy.cn/crates.io-index\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nx\"\u003enet\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nx\"\u003egit-fetch-with-cli\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"kc\"\u003etrue\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e","title":"Rustå›½å†…æºå®‰è£…"},{"content":"1. ç¦»çº¿å®‰è£… ä¸‹è½½rustå®‰è£…åŒ…: é“¾æ¥ æ¯”å¦‚ x86_64-unknown-linux-gnu | x86_64-pc-windows-msvc ä¸‹è½½æºç ï¼Œhttps://static.rust-lang.org/dist/rustc-1.80.0-src.tar.xz ï¼Œ ä¸­é—´çš„ç‰ˆæœ¬å·æ ¹æ®ä¸‹è½½çš„å®‰è£…åŒ…æ”¹å˜ æ‰§è¡Œå®‰è£…åŒ…(windows)æˆ–è§£å‹æ‰§è¡Œå®‰è£…è„šæœ¬ è§£å‹æºç ï¼ˆåº”è¯¥æ˜¯åä¸º rustc-x.x.x-src çš„æ–‡ä»¶å¤¹ï¼‰ï¼Œå°†è¯¥æ–‡ä»¶å¤¹æ›´åä¸ºrustï¼Œ ç„¶ååœ¨rustå®‰è£…ç›®å½•çš„rustlibç›®å½•ä¸‹æ–°å»ºsrcç›®å½•ï¼Œå†å°†åˆšæ›´åçš„rustç›®å½•ç§»å…¥srcç›®å½•ä¸‹ windowsï¼šrustå®‰è£…ç›®å½•\\lib\\rustlib\\\nlinux: /usr/local/lib/rustlib/\n2. ç¦»çº¿ç¼–è¯‘Rusté¡¹ç›® åœ¨ Rust é¡¹ç›®ä¸­å®ç°ç¦»çº¿ç¼–è¯‘å¼€å‘ï¼Œå¯é€šè¿‡ä»¥ä¸‹æ­¥éª¤ç¼“å­˜ä¾èµ–å¹¶è¿ç§»è‡³å†…ç½‘ï¼š\nç”Ÿæˆä¾èµ–é”å®šæ–‡ä»¶ 1 cargo generate-lockfile ç¡®ä¿ Cargo.lock æ–‡ä»¶å­˜åœ¨ï¼Œé”å®šæ‰€æœ‰ä¾èµ–ç‰ˆæœ¬\nä½¿ç”¨ vendor å‘½ä»¤æœ¬åœ°åŒ–ä¾èµ– 1 cargo vendor --locked è¯¥å‘½ä»¤ä¼šï¼š\nåˆ›å»º vendor/ ç›®å½•åŒ…å«æ‰€æœ‰ crates.io ä¾èµ– è‡ªåŠ¨ç”Ÿæˆ .cargo/config.toml é…ç½®æŒ‡å‘æœ¬åœ°ä¾èµ– --locked å‚æ•°ç¡®ä¿ä½¿ç”¨ç²¾ç¡®çš„é”å®šç‰ˆæœ¬ 2.1. è¿è¡Œ cargo vendor å¹¶æŒ‡å®šç›®æ ‡\n1 2 3 4 5 6 # è®¾ç½®ç›®æ ‡å¹³å° set CARGO_BUILD_TARGET=x86_64-unknown-linux-musl # Windows CMD $env:CARGO_BUILD_TARGET=\u0026#34;x86_64-unknown-linux-musl\u0026#34; # PowerShell # ä¸‹è½½ä¾èµ–åˆ° vendor ç›®å½• cargo vendor --versioned-dirs --respect-source-config \u0026ndash;versioned-dirsï¼šä¸ºä¾èµ–ç›®å½•æ·»åŠ ç‰ˆæœ¬åç¼€ï¼ˆå¦‚ serde-1.0.0ï¼‰ï¼Œä¾¿äºè¯†åˆ«ã€‚ \u0026ndash;respect-source-configï¼šå…¼å®¹å·²æœ‰çš„ [source] é…ç½®ã€‚ å¤„ç† Git ä¾èµ– åœ¨ .cargo/config.toml ä¸­æ·»åŠ ï¼š 1 2 3 4 5 6 7 8 9 10 [source.crates-io] replace-with = \u0026#34;vendored-sources\u0026#34; [source.vendored-sources] directory = \u0026#34;vendor\u0026#34; # æ›¿æ¢æ‰€æœ‰ git æºä¸ºæœ¬åœ°è·¯å¾„ [source.\u0026#34;https://github.com/your_org/crates.git\u0026#34;] replace-with = \u0026#34;vendored-sources\u0026#34; local-registry = \u0026#34;path/to/local/git/crates\u0026#34; æ‰“åŒ…å®Œæ•´é¡¹ç›® 1 2 3 4 tar czf project.tar.gz \\ Cargo.toml Cargo.lock src/ \\ vendor/ .cargo/config.toml \\ path/to/local/git/crates/ å†…ç½‘ç¯å¢ƒé…ç½® è§£å‹åæ‰§è¡Œï¼š 1 2 3 4 5 # è®¾ç½®ç¦»çº¿æ¨¡å¼ echo \u0026#39;net.offline = true\u0026#39; \u0026gt;\u0026gt; .cargo/config.toml # ç¼–è¯‘éªŒè¯ cargo build --offline å¢é‡æ›´æ–°æ–¹æ¡ˆï¼ˆå¯é€‰ï¼‰ åœ¨å¤–ç½‘åˆ›å»ºæ›´æ–°è¡¥ä¸ï¼š 1 2 3 4 5 6 7 # ç”Ÿæˆè¡¥ä¸åŒ… cargo vendor --locked | grep \u0026#39;New\u0026#39; \u0026gt; new_deps.list tar czf update_$(date +%F).tar.gz -T new_deps.list # å†…ç½‘åº”ç”¨æ›´æ–° rsync -avhP update.tar.gz intranet:/project/ tar xzf update.tar.gz \u0026amp;\u0026amp; cargo build --offline å…³é”®é…ç½®è¯¦è§£ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 # .cargo/config.toml [source] # ç¦ç”¨é»˜è®¤æº crates-io = false # æœ¬åœ° vendor æº [source.vendored-sources] directory = \u0026#34;vendor\u0026#34; # æ›¿æ¢ git ä¾èµ–ä¸ºæœ¬åœ°è·¯å¾„ [source.\u0026#34;https://github.com/private/repo.git\u0026#34;] git = \u0026#34;file:///opt/internal/crates/private-repo\u0026#34; branch = \u0026#34;main\u0026#34; æ³¨æ„äº‹é¡¹ï¼š\nä½¿ç”¨ --offline å‚æ•°æ—¶å¿…é¡»å­˜åœ¨æœ‰æ•ˆçš„ Cargo.lock å¯¹äºåŒ…å« build script çš„ crateï¼Œéœ€é¢„ç¼–è¯‘å…¶ native ä¾èµ– è·¨å¹³å°ç¼–è¯‘æ—¶éœ€åŒæ­¥ ~/.cargo/registry/cache/ å’Œ ~/.cargo/registry/src/ å»ºè®®ä½¿ç”¨ç›¸åŒ Rust å·¥å…·é“¾ç‰ˆæœ¬ è¿›é˜¶æ–¹æ¡ˆï¼š å¯¹äºä¼ä¸šçº§å¼€å‘ï¼Œå»ºè®®æ­å»ºç§æœ‰ Cargo æ³¨å†Œè¡¨ï¼š\nä½¿ç”¨ crates.io é•œåƒå·¥å…· æˆ– Artifactory é…ç½® CI/CD è‡ªåŠ¨åŒæ­¥å…¬å…± crate åˆ°å†…ç½‘ é€šè¿‡ cargo login --registry intranet è®¾ç½®è®¿é—®å‡­è¯ å®Œæ•´æ“ä½œç¤ºä¾‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 # å¤–ç½‘ç¯å¢ƒå‡†å¤‡ export CARGO_HOME=$(pwd)/.cargo cargo generate-lockfile cargo vendor --locked --respect-source-config mkdir -p .cargo cat \u0026lt;\u0026lt;EOF \u0026gt; .cargo/config.toml [source.crates-io] replace-with = \u0026#34;vendored-sources\u0026#34; [source.vendored-sources] directory = \u0026#34;vendor\u0026#34; [net] offline = true EOF # æ‰“åŒ…ä¼ è¾“ tar czf project.tgz .cargo Cargo.* src/ vendor/ # å†…ç½‘ç¯å¢ƒ tar xzf project.tgz CARGO_HOME=$(pwd)/.cargo cargo build --offline è¯¥æ–¹æ¡ˆå·²åœ¨å¤šä¸ªé‡‘èçº§å¼€å‘ç¯å¢ƒä¸­éªŒè¯ï¼Œå¯æ”¯æŒåŒ…å« 1000+ ä¾èµ–é¡¹çš„å¤§å‹é¡¹ç›®ç¦»çº¿ç¼–è¯‘ã€‚\n","permalink":"https://Kyle-Derrick.github.io/zh/posts/tech/rust/%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85%E5%8F%8A%E7%A6%BB%E7%BA%BF%E4%BE%9D%E8%B5%96/","summary":"\u003ch1 id=\"1-ç¦»çº¿å®‰è£…\"\u003e1. ç¦»çº¿å®‰è£…\u003c/h1\u003e\n\u003col\u003e\n\u003cli\u003eä¸‹è½½rustå®‰è£…åŒ…: \u003ca href=\"https://forge.rust-lang.org/infra/archive-stable-version-installers.html\"\u003eé“¾æ¥\u003c/a\u003e æ¯”å¦‚ x86_64-unknown-linux-gnu  |  x86_64-pc-windows-msvc\u003c/li\u003e\n\u003cli\u003eä¸‹è½½æºç ï¼Œhttps://static.rust-lang.org/dist/rustc-1.80.0-src.tar.xz ï¼Œ ä¸­é—´çš„ç‰ˆæœ¬å·æ ¹æ®ä¸‹è½½çš„å®‰è£…åŒ…æ”¹å˜\u003c/li\u003e\n\u003cli\u003eæ‰§è¡Œå®‰è£…åŒ…(windows)æˆ–è§£å‹æ‰§è¡Œå®‰è£…è„šæœ¬\u003c/li\u003e\n\u003cli\u003eè§£å‹æºç ï¼ˆåº”è¯¥æ˜¯åä¸º rustc-x.x.x-src çš„æ–‡ä»¶å¤¹ï¼‰ï¼Œå°†è¯¥æ–‡ä»¶å¤¹æ›´åä¸ºrustï¼Œ\u003c/li\u003e\n\u003cli\u003eç„¶ååœ¨rustå®‰è£…ç›®å½•çš„rustlibç›®å½•ä¸‹æ–°å»ºsrcç›®å½•ï¼Œå†å°†åˆšæ›´åçš„rustç›®å½•ç§»å…¥srcç›®å½•ä¸‹\u003c/li\u003e\n\u003c/ol\u003e\n\u003cblockquote\u003e\n\u003cp\u003ewindowsï¼šrustå®‰è£…ç›®å½•\\lib\\rustlib\\\u003c/p\u003e","title":"Rustç¦»çº¿ç¯å¢ƒå®‰è£…åŠä½¿ç”¨vendorç¦»çº¿ç¼–è¯‘é¡¹ç›®"},{"content":"å‡åº“å­˜æ¡ˆä¾‹ 1. åŒæ­¥é” ä¼˜ç‚¹ï¼š ç®€å•ï¼Œèƒ½è§£å†³é—®é¢˜ ç¼ºç‚¹ï¼šä»…é€‚åˆå•ä¸ªæœåŠ¡ï¼Œå¤šæœåŠ¡è¿›ç¨‹æ—¶å¤±æ•ˆ\n2. åˆ†å¸ƒå¼é” æ³¨æ„\né”æŒæœ‰è€…å½’å± å„ä¸ªæ“ä½œé”çš„åœ°æ–¹éœ€è¦ä¿è¯åŸå­æ€§ éœ€è¦è€ƒè™‘è¿›ç¨‹æŒ‚æ‰åé”è¶…æ—¶ éœ€è¦è€ƒè™‘é”ç»­å‘½ Redissonåˆ†å¸ƒå¼é”ä½¿ç”¨\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 RLock lock = null; try { lock = redissonClient.getLock(lock_name); lock.lock(); /* ä¸šåŠ¡ä»£ç  */ } finally { if (lock != null) { lock.unlock(); } } Redissonåˆ†å¸ƒå¼é”åŸç†ï¼š Redissonåº•å±‚ä¸Šé”å®é™…ä¸Šæ˜¯æ‰§è¡Œluaè„šæœ¬\nå…ˆè®¾ç½®æŒ‡å®šé”åï¼ŒåŠå…¶å¯¹åº”å€¼ 1ï¼Œ ï¼ˆkvç»“æ„ä¸”å€¼ä¸ºæ•°å€¼ï¼Œä»¥æ–¹ä¾¿é”é‡å…¥ï¼‰ è®¾ç½®è¶…æ—¶æ—¶é—´ 1 2 3 4 5 6 7 8 9 -- KEYS[1] è¡¨ç¤ºé”åœ¨redisä¸­çš„key -- ARGV[1] æ˜¯è¶…æ—¶æ—¶é—´ -- ARGV[2] æ˜¯é”åŠ é”çš„åå­—ï¼ˆçº¿ç¨‹/è¿›ç¨‹IDï¼‰ if ((redis.call(\u0026#39;exists\u0026#39;, KEYS[1]) == 0) or (redis.call(\u0026#39;hexists\u0026#39;, KEYS[1], ARGV[2]) == 1)) then redis.call(\u0026#39;hincrby\u0026#39;, KEYS[1], ARGV[2], 1); redis.call(\u0026#39;pexpire\u0026#39;, KEYS[1], ARGV[1]); return nil; end; return redis.call(\u0026#39;pttl\u0026#39;, KEYS[1]); è·å–é”æˆåŠŸåä¼šå®šæ—¶ï¼ˆè¶…æ—¶æ—¶é—´ / 3ï¼‰å»åˆ·æ–°è¶…æ—¶æ—¶é—´ï¼Œä¿æŒå¿ƒè·³ 1 2 3 4 5 6 7 8 -- KEYS[1] è¡¨ç¤ºé”åœ¨redisä¸­çš„key -- ARGV[1] æ˜¯è¶…æ—¶æ—¶é—´ -- ARGV[2] æ˜¯é”åŠ é”çš„åå­—ï¼ˆçº¿ç¨‹/è¿›ç¨‹IDï¼‰ if (redis.call(\u0026#39;hexists\u0026#39;, KEYS[1], ARGV[2]) == 1) then redis.call(\u0026#39;pexpire\u0026#39;, KEYS[1], ARGV[1]); return 1; end; return 0; é—®é¢˜1ï¼šæ€§èƒ½é—®é¢˜ï¼Œä¸Šé”å¯¼è‡´çš„æ€§èƒ½é—®é¢˜å¦‚ä½•å°½é‡ä¼˜åŒ– ä½¿ç”¨åˆ†æ®µé”æ€è·¯ï¼Œæ‹†åˆ†æˆå¤šæ®µé”ï¼Œæ¯”å¦‚200åº“å­˜æ‹†åˆ†æˆ10ä¸ªæ®µï¼Œæ¯æ®µ20ä¸ªåº“å­˜ï¼Œåˆ†å¼€ä¸Šé” ä½¿ç”¨redisçš„CASæ“ä½œï¼ˆåº•å±‚ä¾æ—§æ˜¯æ‰§è¡Œluaè„šæœ¬å®ç°ï¼‰æ›¿æ¢ è¯»å–-ä¿®æ”¹-ä¿å­˜ è¿™ä¸€å¥—æ“ä½œ\né—®é¢˜2ï¼šRedisé›†ç¾¤ç¯å¢ƒä¸‹ï¼Œä¸»èŠ‚ç‚¹æŒ‚æ‰æ—¶å¼•å‘é”ä¸¢å¤±é—®é¢˜è§£å†³ è§£å†³æ–¹æ³•ï¼š\nä½¿ç”¨zookeeperï¼ˆCPï¼‰æ›¿æ¢redisï¼ˆAPï¼‰æ¥åšåˆ†å¸ƒå¼é”ï¼ˆä½¿ç”¨CPç‰¹æ€§ï¼‰ Redlock: ä½¿ç”¨Redlockè§£å†³ï¼Œå®ç°æ–¹å¼ä¸zookeeperç±»ä¼¼ï¼ˆåŠæ•°ä»¥ä¸ŠèŠ‚ç‚¹åŠ é”æˆåŠŸæ‰ä¼šè¿”å›æˆåŠŸï¼‰ï¼ˆï¼ä½†ä¸æ¨èä½¿ç”¨ï¼‰ 3. ç¼“å­˜æ•°æ®åº“åŒå†™ä¸ä¸€è‡´ å†™åº“å’Œå†™ç¼“å­˜ä¹‹é—´ï¼Œå…¶ä»–çº¿ç¨‹å…ˆä¸€æ­¥æ‰§è¡Œå®Œå†™ç¼“å­˜äº†ï¼Œåˆ™ä¼šå¯¼è‡´æ–°æ•°æ®è¢«è¦†ç›– ç›´æ¥æ”¹ä¸ºå†™åº“ååˆ é™¤ç¼“å­˜ï¼Œè®©å…¶åœ¨è¯»å–æ—¶é‡æ–°è·å– è¯»å–æ—¶ï¼Œå»è·å–åº“ä¸­æ•°æ®å¹¶å†™å…¥ç¼“å­˜æœŸé—´ï¼Œè¢«å…¶ä»–å†™çº¿ç¨‹å…ˆä¸€æ­¥å†™å…¥å…¶ä»–æ•°æ®ï¼Œåˆ™ä¼šå¯¼è‡´ç¼“å­˜ä¸­çš„æ•°æ®å¹¶éæœ€æ–°æ•°æ® å»¶è¿ŸåŒåˆ ï¼ˆä¸ä¸€å®š100%è§£å†³ï¼Œä¸å¤ªå»ºè®®ï¼Œå¼Šç«¯å¾ˆå¤§ï¼‰ é˜Ÿåˆ—åŒ–å¤„ç†ï¼ˆå®ç°åå¤æ‚ï¼Œä¸”æœ‰å»é‡ç­‰å…¶ä»–æ–°é—®é¢˜ï¼‰ ä¹è§‚é”ï¼ˆä¼šå¯¼è‡´å¤§é‡çš„å†™å¤±è´¥ï¼ï¼ï¼ï¼‰ ä½¿ç”¨åˆ†å¸ƒå¼é”è§£å†³ï¼ˆè¯»å†™é”ï¼Œè¯»å¤šå†™å°‘åœºæ™¯ä½¿ç”¨ï¼‰ åœ¨æ›´æ–°ç¼“å­˜æ—¶ï¼Œè®¾ç½®è¶…æ—¶æ—¶é—´ï¼ˆé€‚åˆè¯»å¤šå†™å¤šåœºæ™¯ï¼‰ äº†è§£canalï¼ˆé€‚åˆè¯»å¤šå†™å¤šåœºæ™¯ï¼Œä¸”ä¸€å®šè¦ä½¿ç”¨ç¼“å­˜åœºæ™¯ï¼‰ ","permalink":"https://Kyle-Derrick.github.io/zh/posts/tech/open-source-component/redis/redis_concurrency_case/","summary":"\u003ch1 id=\"å‡åº“å­˜æ¡ˆä¾‹\"\u003eå‡åº“å­˜æ¡ˆä¾‹\u003c/h1\u003e\n\u003ch2 id=\"1-åŒæ­¥é”\"\u003e1. åŒæ­¥é”\u003c/h2\u003e\n\u003cp\u003eä¼˜ç‚¹ï¼š ç®€å•ï¼Œèƒ½è§£å†³é—®é¢˜\nç¼ºç‚¹ï¼šä»…é€‚åˆå•ä¸ªæœåŠ¡ï¼Œå¤šæœåŠ¡è¿›ç¨‹æ—¶å¤±æ•ˆ\u003c/p\u003e\n\u003ch2 id=\"2-åˆ†å¸ƒå¼é”\"\u003e2. åˆ†å¸ƒå¼é”\u003c/h2\u003e\n\u003cp\u003eæ³¨æ„\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eé”æŒæœ‰è€…å½’å±\u003c/li\u003e\n\u003cli\u003eå„ä¸ªæ“ä½œé”çš„åœ°æ–¹éœ€è¦ä¿è¯åŸå­æ€§\u003c/li\u003e\n\u003cli\u003eéœ€è¦è€ƒè™‘è¿›ç¨‹æŒ‚æ‰åé”è¶…æ—¶\u003c/li\u003e\n\u003cli\u003eéœ€è¦è€ƒè™‘é”ç»­å‘½\u003c/li\u003e\n\u003c/ul\u003e\n\u003cblockquote\u003e\n\u003cp\u003eRedissonåˆ†å¸ƒå¼é”ä½¿ç”¨\u003c/p\u003e","title":"Rediså¹¶å‘ç›¸å…³ä½¿ç”¨æ¡ˆä¾‹"},{"content":"Mavenå›½å†…æºé…ç½® ä¿®æ”¹Mavenä¸­çš„é…ç½®æ–‡ä»¶ã€‚ è¿›å…¥Mavneçš„å®‰è£…è·¯å¾„ä¹Ÿå°±æ˜¯è§£å‹è·¯å¾„ï¼Œä¾‹å¦‚D:\\apache-maven-3.5.4\\confã€‚ä¿®æ”¹D:\\apache-maven-3.5.4\\confä¸‹çš„settings.xmlæ–‡ä»¶\næ‰¾åˆ°\u0026lt;mirrors\u0026gt;\u0026lt;/mirrors\u0026gt;æ ‡ç­¾ï¼Œåœ¨å…¶ä¸­é…ç½®é˜¿é‡Œäº‘é•œåƒã€‚ 1 2 3 4 5 6 7 8 9 \u0026lt;mirrors\u0026gt; \u0026lt;!--ä¸‹é¢æ˜¯é…ç½®å†…å®¹--\u0026gt; \u0026lt;mirror\u0026gt; \u0026lt;id\u0026gt;alimaven\u0026lt;/id\u0026gt; \u0026lt;mirrorOf\u0026gt;central\u0026lt;/mirrorOf\u0026gt; \u0026lt;name\u0026gt;aliyun maven\u0026lt;/name\u0026gt; \u0026lt;url\u0026gt;http://maven.aliyun.com/nexus/content/repositories/central/\u0026lt;/url\u0026gt; \u0026lt;/mirror\u0026gt; \u0026lt;/mirrors\u0026gt; 1 2 3 4 5 6 7 8 \u0026lt;mirrors\u0026gt; \u0026lt;mirror\u0026gt; \u0026lt;id\u0026gt;aliyun-public\u0026lt;/id\u0026gt; \u0026lt;mirrorOf\u0026gt;*\u0026lt;/mirrorOf\u0026gt; \u0026lt;name\u0026gt;aliyun public\u0026lt;/name\u0026gt; \u0026lt;url\u0026gt;https://maven.aliyun.com/repository/public\u0026lt;/url\u0026gt; \u0026lt;/mirror\u0026gt; 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 \u0026lt;/mirrors\u0026gt; \u0026lt;profile\u0026gt; \u0026lt;repositories\u0026gt; \u0026lt;repository\u0026gt; \u0026lt;id\u0026gt;google\u0026lt;/id\u0026gt; \u0026lt;url\u0026gt;https://maven.aliyun.com/repository/google\u0026lt;/url\u0026gt; \u0026lt;releases\u0026gt; \u0026lt;enabled\u0026gt;true\u0026lt;/enabled\u0026gt; \u0026lt;/releases\u0026gt; \u0026lt;snapshots\u0026gt; \u0026lt;enabled\u0026gt;true\u0026lt;/enabled\u0026gt; \u0026lt;/snapshots\u0026gt; \u0026lt;/repository\u0026gt; \u0026lt;repository\u0026gt; \u0026lt;id\u0026gt;gradle-plugin\u0026lt;/id\u0026gt; \u0026lt;url\u0026gt;https://maven.aliyun.com/repository/gradle-plugin\u0026lt;/url\u0026gt; \u0026lt;releases\u0026gt; \u0026lt;enabled\u0026gt;true\u0026lt;/enabled\u0026gt; \u0026lt;/releases\u0026gt; \u0026lt;snapshots\u0026gt; \u0026lt;enabled\u0026gt;true\u0026lt;/enabled\u0026gt; \u0026lt;/snapshots\u0026gt; \u0026lt;/repository\u0026gt; \u0026lt;repository\u0026gt; \u0026lt;id\u0026gt;spring\u0026lt;/id\u0026gt; \u0026lt;url\u0026gt;https://maven.aliyun.com/repository/spring\u0026lt;/url\u0026gt; \u0026lt;releases\u0026gt; \u0026lt;enabled\u0026gt;true\u0026lt;/enabled\u0026gt; \u0026lt;/releases\u0026gt; \u0026lt;snapshots\u0026gt; \u0026lt;enabled\u0026gt;true\u0026lt;/enabled\u0026gt; \u0026lt;/snapshots\u0026gt; \u0026lt;/repository\u0026gt; \u0026lt;repository\u0026gt; \u0026lt;id\u0026gt;spring-plugin\u0026lt;/id\u0026gt; \u0026lt;url\u0026gt;https://maven.aliyun.com/repository/spring-plugin\u0026lt;/url\u0026gt; \u0026lt;releases\u0026gt; \u0026lt;enabled\u0026gt;true\u0026lt;/enabled\u0026gt; \u0026lt;/releases\u0026gt; \u0026lt;snapshots\u0026gt; \u0026lt;enabled\u0026gt;true\u0026lt;/enabled\u0026gt; \u0026lt;/snapshots\u0026gt; \u0026lt;/repository\u0026gt; \u0026lt;repository\u0026gt; \u0026lt;id\u0026gt;grails-core\u0026lt;/id\u0026gt; \u0026lt;url\u0026gt;https://maven.aliyun.com/repository/grails-core\u0026lt;/url\u0026gt; \u0026lt;releases\u0026gt; \u0026lt;enabled\u0026gt;true\u0026lt;/enabled\u0026gt; \u0026lt;/releases\u0026gt; \u0026lt;snapshots\u0026gt; \u0026lt;enabled\u0026gt;true\u0026lt;/enabled\u0026gt; \u0026lt;/snapshots\u0026gt; \u0026lt;/repository\u0026gt; \u0026lt;/repositories\u0026gt; \u0026lt;/profile\u0026gt; Gradleå›½å†…æºé…ç½® é’ˆå¯¹å•ä¸ªé¡¹ç›®æ¯”è¾ƒç®€å•ï¼š 1 2 3 4 5 6 7 8 9 10 repositories { maven { url \u0026#39;https://maven.aliyun.com/repository/public/\u0026#39; } maven { url \u0026#39;https://maven.aliyun.com/repository/spring/\u0026#39; } mavenLocal() mavenCentral() } é’ˆå¯¹å…¨å±€é¡¹ç›® åœ¨GRADLE_HOME/init.d/ç›®å½•ä¸‹æ–°å»ºæ–‡ä»¶ï¼šinit.gradle\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 allprojects { repositories { mavenLocal() maven { url \u0026#39;https://maven.aliyun.com/repository/public/\u0026#39; } maven { url \u0026#39;https://maven.aliyun.com/repository/spring/\u0026#39;} maven { url \u0026#39;https://maven.aliyun.com/repository/google/\u0026#39;} maven { url \u0026#39;https://maven.aliyun.com/repository/gradle-plugin/\u0026#39;} maven { url \u0026#39;https://maven.aliyun.com/repository/spring-plugin/\u0026#39;} maven { url \u0026#39;https://maven.aliyun.com/repository/grails-core/\u0026#39;} maven { url \u0026#39;https://maven.aliyun.com/repository/apache-snapshots/\u0026#39;} mavenCentral() } } ","permalink":"https://Kyle-Derrick.github.io/zh/posts/tech/java/maven_gradle_mirror/","summary":"\u003ch1 id=\"mavenå›½å†…æºé…ç½®\"\u003eMavenå›½å†…æºé…ç½®\u003c/h1\u003e\n\u003ch2 id=\"ä¿®æ”¹mavenä¸­çš„é…ç½®æ–‡ä»¶\"\u003eä¿®æ”¹Mavenä¸­çš„é…ç½®æ–‡ä»¶ã€‚\u003c/h2\u003e\n\u003cp\u003eè¿›å…¥Mavneçš„å®‰è£…è·¯å¾„ä¹Ÿå°±æ˜¯è§£å‹è·¯å¾„ï¼Œä¾‹å¦‚\u003ccode\u003eD:\\apache-maven-3.5.4\\conf\u003c/code\u003eã€‚ä¿®æ”¹\u003ccode\u003eD:\\apache-maven-3.5.4\\conf\u003c/code\u003eä¸‹çš„\u003ccode\u003esettings.xml\u003c/code\u003eæ–‡ä»¶\u003c/p\u003e","title":"Mavenã€Gradleå›½å†…æºé…ç½®"},{"content":"hugoå›¾ç‰‡å¼•å…¥é—®é¢˜ æˆ‘åœ¨ä½¿ç”¨hugoå†™ç¬”è®°çš„æ—¶å€™é‡åˆ°äº†æ’å…¥å›¾ç‰‡å‡ºç°é“¾æ¥å¤±æ•ˆé—®é¢˜ï¼Œå› ä¸ºåœ¨hugoä¸­ xxx.md ç”Ÿæˆhtmlåä¼šç”Ÿæˆ xxx ç›®å½•ï¼Œç„¶åå† xxx ç›®å½•ä¸‹ç”Ÿæˆ index.html ï¼Œå› æ­¤ç¼–å†™mdæ—¶çš„å›¾ç‰‡å¼•ç”¨è·¯å¾„åœ¨ç”Ÿæˆhtmlåè¾¹çš„ä¸å¯ç”¨äº†ï¼›\nç½‘ä¸ŠæŸ¥åˆ°çš„è§£å†³æ–¹æ³•æœ‰ä¸¤ç§ï¼š\nå›¾ç‰‡æ”¾å…¥ /static ç›®å½•ä¸‹ï¼Œç„¶åé€šè¿‡ç»å¯¹è·¯å¾„å¼•å…¥ å°† xxx.md è°ƒæ•´ä¸º xxx/index.md ç„¶åä½¿ç”¨ç›¸å¯¹è·¯å¾„å¼•ç”¨å›¾ç‰‡ ä½†æ˜¯ï¼šæ–¹æ³•ä¸€éœ€è¦æŠŠæ‰€æœ‰å›¾ç‰‡æ”¾åˆ° /static ä¸‹ï¼Œéœ€è¦å•ç‹¬ç»´æŠ¤ï¼›æ–¹æ³•äºŒä¼šå¯¼è‡´å‡ºç°å¤§é‡ç›®å½•å’Œ index.md æ–‡ä»¶ï¼Œç›®å½•å°±ä¼šéå¸¸ä¹±ã€‚\næ•…è€Œæƒ³äº†ä¸€ç§åŠæ³•ï¼šé€šè¿‡ä¿®æ”¹mdç”Ÿæˆhtmlæ—¶å›¾ç‰‡æ¸²æŸ“å¤„ç†é€»è¾‘ï¼Œä»¥æ”¯æŒç›¸å¯¹è·¯å¾„å›¾ç‰‡å¼•ç”¨\nä¿®æ”¹ render_image.html (/layouts/_default/_markup/render_image.html)\né»˜è®¤å¯èƒ½æ²¡æœ‰ï¼Œæˆ‘çš„æ˜¯ä» PaperMod ä¸»é¢˜é‡Œå¤åˆ¶çš„\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 {{- $u := urls.Parse .Destination -}} {{- $src := $u.String -}} {{- if not $u.IsAbs -}} {{- $path := strings.TrimPrefix \u0026#34;./\u0026#34; $u.Path }} {{- with or (.PageInner.Resources.Get $path) (resources.Get $path) -}} {{- $src = .RelPermalink -}} {{- with $u.RawQuery -}} {{- $src = printf \u0026#34;%s?%s\u0026#34; $src . -}} {{- end -}} {{- with $u.Fragment -}} {{- $src = printf \u0026#34;%s#%s\u0026#34; $src . -}} {{- end -}} {{/* æ–°å¢é€»è¾‘ï¼šé index.md çš„æœ¬åœ°ç›¸å¯¹è·¯å¾„æ·»åŠ  ../ */}} {{- else -}} {{- if and (not (hasPrefix $u.Path \u0026#34;/\u0026#34;)) (ne .PageInner.File.LogicalName \u0026#34;index.md\u0026#34;) -}} {{- $src = printf \u0026#34;../%s\u0026#34; $path -}} {{- end -}} {{- end -}} {{- ä¸€ç›´åˆ°è¿™é‡Œ -}} {{- end -}} {{- $attributes := merge .Attributes (dict \u0026#34;alt\u0026#34; .Text \u0026#34;src\u0026#34; $src \u0026#34;title\u0026#34; (.Title | transform.HTMLEscape) \u0026#34;loading\u0026#34; \u0026#34;lazy\u0026#34;) -}} \u0026lt;img {{- range $k, $v := $attributes -}} {{- if $v -}} {{- printf \u0026#34; %s=%q\u0026#34; $k $v | safeHTMLAttr -}} {{- end -}} {{- end -}}\u0026gt; {{- /**/ -}} è¿™æ ·ä½ å°±å¯ä»¥ç›´æ¥åœ¨ xxx.md ä¸­ç›´æ¥ä½¿ç”¨ img/xxx_1.1.png å¼•å…¥å›¾ç‰‡äº†\n","permalink":"https://Kyle-Derrick.github.io/zh/posts/tech/other_general/hugo/hugo_include_image/","summary":"\u003ch1 id=\"hugoå›¾ç‰‡å¼•å…¥é—®é¢˜\"\u003ehugoå›¾ç‰‡å¼•å…¥é—®é¢˜\u003c/h1\u003e\n\u003cblockquote\u003e\n\u003cp\u003eæˆ‘åœ¨ä½¿ç”¨hugoå†™ç¬”è®°çš„æ—¶å€™é‡åˆ°äº†æ’å…¥å›¾ç‰‡å‡ºç°é“¾æ¥å¤±æ•ˆé—®é¢˜ï¼Œå› ä¸ºåœ¨hugoä¸­ xxx.md ç”Ÿæˆhtmlåä¼šç”Ÿæˆ xxx ç›®å½•ï¼Œç„¶åå† xxx ç›®å½•ä¸‹ç”Ÿæˆ index.html ï¼Œå› æ­¤ç¼–å†™mdæ—¶çš„å›¾ç‰‡å¼•ç”¨è·¯å¾„åœ¨ç”Ÿæˆhtmlåè¾¹çš„ä¸å¯ç”¨äº†ï¼›\u003c/p\u003e","title":"hugoä»åŒçº§ç›®å½•ä¸‹æ’å…¥å›¾ç‰‡ï¼ˆç›¸å¯¹è·¯å¾„ï¼‰"},{"content":"æ‚é¡¹è®°å½•ç‚¹ 1. å‘½ä»¤ ç¼–å†™æ—¶å¯å¯åŠ¨ server éšæ—¶è§‚å¯Ÿå®é™…æ˜¾ç¤ºæ•ˆæœï¼š 1 hugo server ç¼–è¯‘ 1 hugo --gc --minify --cleanDestinationDir 2. mdå¼€å¤´çš„å‚æ•° date\nâ€¢ æ–‡ç« å‘å¸ƒæ—¥æœŸï¼Œæ ¼å¼ä¸º YYYY-MM-DDTHH:mm:ss+08:00ï¼ˆISO 8601ï¼‰ã€‚\nâ€¢ ç”¨é€”ï¼šå†³å®šæ–‡ç« åœ¨æ—¶é—´è½´ä¸­çš„ä½ç½®ï¼Œå½±å“æ’åºå’Œå½’æ¡£è·¯å¾„ã€‚\nâ€¢ ç¤ºä¾‹ï¼šdate: 2025-07-21T14:30:00+08:00\ndraft\nâ€¢ å¸ƒå°”å€¼ï¼ˆtrue/falseï¼‰ï¼Œæ ‡è®°æ˜¯å¦ä¸ºè‰ç¨¿ã€‚\nâ€¢ ç”¨é€”ï¼šè‹¥ä¸º trueï¼Œé»˜è®¤æƒ…å†µä¸‹ hugo å‘½ä»¤ä¸ä¼šç”Ÿæˆè¯¥æ–‡ç« ï¼Œéœ€æ·»åŠ  \u0026ndash;buildDrafts å‚æ•°æ‰èƒ½ç¼–è¯‘ã€‚\nâ€¢ ç¤ºä¾‹ï¼šdraft: true\ndescription\nâ€¢ æ–‡ç« æ‘˜è¦æˆ–æè¿°ï¼Œé€šå¸¸ç”¨äº SEO å’Œåˆ—è¡¨é¡µé¢„è§ˆã€‚\nâ€¢ ç¤ºä¾‹ï¼šdescription: \u0026ldquo;Hugo Front Matter å‚æ•°è¯¦è§£\u0026rdquo;\nauthor\nâ€¢ æŒ‡å®šä½œè€…å§“åï¼Œå¯åœ¨æ¨¡æ¿ä¸­è°ƒç”¨æ˜¾ç¤ºã€‚\nâ€¢ ç¤ºä¾‹ï¼šauthor: \u0026ldquo;Your Name\u0026rdquo;\nimage\nâ€¢ æ–‡ç« å°é¢æˆ–ç‰¹è‰²å›¾ç‰‡è·¯å¾„ï¼ˆæ”¯æŒæœ¬åœ°æˆ–å¤–éƒ¨ URLï¼‰ã€‚\nâ€¢ ç¤ºä¾‹ï¼šimage: \u0026ldquo;/images/featured.jpg\u0026rdquo;\nsummary\nâ€¢ æ‰‹åŠ¨æŒ‡å®šæ–‡ç« æ‘˜è¦ï¼Œè¦†ç›–è‡ªåŠ¨ç”Ÿæˆçš„æ‘˜è¦ã€‚\nâ€¢ ç¤ºä¾‹ï¼šsummary: \u0026ldquo;æœ¬æ–‡è¯¦ç»†è§£æ Hugo Front Matter çš„æ‰€æœ‰å‚æ•°\u0026rdquo;\ntoc\nâ€¢ å¸ƒå°”å€¼ï¼ˆtrue/falseï¼‰ï¼Œæ§åˆ¶æ˜¯å¦ç”Ÿæˆç›®å½•ï¼ˆTable of Contentsï¼‰ã€‚\nâ€¢ ç¤ºä¾‹ï¼štoc: true\nweight\nâ€¢ æ•°å€¼ï¼Œæ§åˆ¶æ–‡ç« åœ¨åˆ—è¡¨ä¸­çš„æ’åºæƒé‡ï¼ˆæ•°å€¼è¶Šå°è¶Šé å‰ï¼‰ã€‚\nâ€¢ ç¤ºä¾‹ï¼šweight: 10\nhiddenFromHomePage / hiddenFromSearch\nâ€¢ å¸ƒå°”å€¼ï¼Œæ§åˆ¶æ–‡ç« æ˜¯å¦åœ¨é¦–é¡µæˆ–æœç´¢ç»“æœä¸­éšè—ã€‚\nâ€¢ ç¤ºä¾‹ï¼šhiddenFromHomePage: true\nmath\nâ€¢ å¸ƒå°”å€¼ï¼Œå¯ç”¨æ•°å­¦å…¬å¼æ”¯æŒï¼ˆéœ€ä¸»é¢˜å…¼å®¹ LaTeXï¼‰ã€‚\nâ€¢ ç¤ºä¾‹ï¼šmath: true\nlightgallery\nâ€¢ å¸ƒå°”å€¼ï¼Œå¯ç”¨å›¾ç‰‡ç¯ç®±æ•ˆæœï¼ˆä¾èµ–ä¸»é¢˜å®ç°ï¼‰ã€‚\nâ€¢ ç¤ºä¾‹ï¼šlightgallery: true\naliases\nâ€¢ æ•°ç»„ï¼Œè®¾ç½®æ–‡ç« åˆ«åï¼ˆæ—§ URL é‡å®šå‘ï¼‰ã€‚\nâ€¢ ç¤ºä¾‹ï¼š\naliases:\n\u0026ldquo;/old-path/post.html\u0026rdquo; 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 title: \u0026#34;{{ replace .Name \u0026#34;-\u0026#34; \u0026#34; \u0026#34; | title }}\u0026#34; date: {{ .Date }} lastmod: {{ .Date }} author: [\u0026#34;AInfinity\u0026#34;] categories: - category 1 - category 2 tags: - tag 1 - tag 2 keywords: - word 1 - word 2 description: \u0026#34;\u0026#34; # æ–‡ç« æè¿°ï¼Œä¸æœç´¢ä¼˜åŒ–ç›¸å…³ summary: \u0026#34;\u0026#34; # æ–‡ç« ç®€å•æè¿°ï¼Œä¼šå±•ç¤ºåœ¨ä¸»é¡µ weight: # è¾“å…¥1å¯ä»¥é¡¶ç½®æ–‡ç« ï¼Œç”¨æ¥ç»™æ–‡ç« å±•ç¤ºæ’åºï¼Œä¸å¡«å°±é»˜è®¤æŒ‰æ—¶é—´æ’åº slug: \u0026#34;\u0026#34; draft: false # æ˜¯å¦ä¸ºè‰ç¨¿ comments: true showToc: true # æ˜¾ç¤ºç›®å½• TocOpen: true # è‡ªåŠ¨å±•å¼€ç›®å½• autonumbering: true # ç›®å½•è‡ªåŠ¨ç¼–å· hidemeta: false # æ˜¯å¦éšè—æ–‡ç« çš„å…ƒä¿¡æ¯ï¼Œå¦‚å‘å¸ƒæ—¥æœŸã€ä½œè€…ç­‰ disableShare: true # åº•éƒ¨ä¸æ˜¾ç¤ºåˆ†äº«æ  searchHidden: false # è¯¥é¡µé¢å¯ä»¥è¢«æœç´¢åˆ° showbreadcrumbs: true #é¡¶éƒ¨æ˜¾ç¤ºå½“å‰è·¯å¾„ mermaid: true cover: image: \u0026#34;\u0026#34; caption: \u0026#34;\u0026#34; alt: \u0026#34;\u0026#34; relative: false ","permalink":"https://Kyle-Derrick.github.io/zh/posts/tech/other_general/hugo/hugo_exp_note/","summary":"hugoä½¿ç”¨è¿‡ç¨‹ä¸­çš„ä¸€äº›ç»éªŒè®°å½•","title":"hugoä½¿ç”¨ç»éªŒ"},{"content":"","permalink":"https://Kyle-Derrick.github.io/zh/posts/tech/other_general/hugo/hugo_giscus_comment/","summary":"","title":"hugoä½¿ç”¨Giscusæ”¯æŒè¯„è®º"},{"content":"settings.json é…ç½® é€šè¿‡æ·»åŠ  .vscode/settings.json æ¥é…ç½® vscode ï¼Œ æ¯”å¦‚ä½¿ Markdown æ”¯æŒä»£ç ç‰‡æ®µå’Œæç¤ºï¼š\n1 2 3 4 5 6 7 8 9 { \u0026#34;[markdown]\u0026#34;: { \u0026#34;editor.quickSuggestions\u0026#34;: { \u0026#34;other\u0026#34;: true, // å…è®¸ä»£ç ç‰‡æ®µåœ¨éæ³¨é‡Š/å­—ç¬¦ä¸²åŒºåŸŸè§¦å‘ \u0026#34;comments\u0026#34;: false, \u0026#34;strings\u0026#34;: false } } } *.code-snippets ä»£ç ç‰‡æ®µ é€šè¿‡æ·»åŠ  .vscode/xxx.code-snippets æ¥æ·»åŠ è‡ªå®šä¹‰ä»£ç ç‰‡æ®µï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 { \u0026#34;Hugo Title\u0026#34;: { \u0026#34;prefix\u0026#34;: \u0026#34;hugo\u0026#34;, // è§¦å‘è¯ï¼Œå¦‚è¾“å…¥\u0026#34;time\u0026#34;åæŒ‰Tab \u0026#34;body\u0026#34;: [ \u0026#34;---\u0026#34;, \u0026#34;title: \u0026#39;æ ‡é¢˜\u0026#39;\u0026#34;, \u0026#34;author: [\u0026#39;kyle\u0026#39;]\u0026#34;, \u0026#34;summary: \u0026#39;ç®€å•æè¿°\u0026#39;\u0026#34;, \u0026#34;date: \u0026#39;${CURRENT_YEAR}-${CURRENT_MONTH}-${CURRENT_DATE}T${CURRENT_HOUR}:${CURRENT_MINUTE}:${CURRENT_SECOND}+08:00\u0026#39;\u0026#34;, \u0026#34;draft: true\u0026#34;, \u0026#34;---\u0026#34;, \u0026#34;\u0026#34; ], \u0026#34;description\u0026#34;: \u0026#34;hugo md å¼€å¤´é…ç½®\u0026#34; } } ","permalink":"https://Kyle-Derrick.github.io/zh/posts/tech/vscode/vscode-project-config/","summary":"[æ­¤æ–‡ä¸ºéšç¬”éšè®°]é€šè¿‡å¯¹é¡¹ç›®ä¸‹çš„ .vscode ç›®å½•æ·»åŠ é…ç½®è¾¾åˆ°é¡¹ç›®çº§é…ç½®çš„ç›®çš„ï¼Œè¿™æ ·å°±ä¸ç”¨æ¯ä¸ªç¯å¢ƒéƒ½ä¿®æ”¹é…ç½®äº†","title":"vscodeé¡¹ç›®çº§é…ç½®"},{"content":"1. Hugoéƒ¨åˆ† 1.1. å®‰è£…Hugo https://github.com/gohugoio/hugo/releases/latest\næ ¹æ®è‡ªå·±çš„æ“ä½œç³»ç»Ÿä¸‹è½½ hugo_extended_withdeploy_xxxï¼Œæˆ‘è¿™é‡Œæ˜¯Ubuntuï¼Œæ‰€ä»¥ä¸‹è½½çš„ hugo_extended_withdeploy_0.147.3_linux-amd64.deb\n1.2. Hugoåˆ›å»ºç«™ç‚¹ï¼ˆé¡¹ç›®ï¼‰ Hugo é»˜è®¤é…ç½®æ–‡ä»¶æ ¼å¼æ˜¯.tomlï¼Œä½†.ymlæ ¼å¼æ›´æ˜“çœ‹æ‡‚ï¼Œæ›´å¥½é…ç½®ï¼Œæ‰€ä»¥æˆ‘è¿™é‡Œä½¿ç”¨çš„ymlæ ¼å¼é…ç½®æ–‡ä»¶\n1 hugo new site Kyle-Derrick.github.io -f yml å®Œäº‹åç”Ÿæˆä¸€ä¸ªKyle-Derrick.github.ioç›®å½•ï¼Œè¿›å…¥ç›®å½•åæ˜¯å¦‚ä¸‹ç»“æ„ï¼š\n1 2 3 4 5 6 7 8 9 10 11 Kyle-Derrick.github.io/ â”œâ”€â”€ archetypes/ â”‚ â””â”€â”€ default.md â”œâ”€â”€ assets/ â”œâ”€â”€ content/ â”œâ”€â”€ data/ â”œâ”€â”€ i18n/ â”œâ”€â”€ layouts/ â”œâ”€â”€ static/ â”œâ”€â”€ themes/ â””â”€â”€ hugo.yml \u0026lt;-- site configuration ç›®å½•è¯´æ˜ï¼š\næ–‡ä»¶åç§° ç®€è¦è¯´æ˜ archetypes è¯¥æ–‡ä»¶å¤¹ä¸»è¦ç”¨æ¥å­˜å‚¨åšå®¢ç”Ÿæˆçš„æ¨¡æ¿æ–‡ä»¶ï¼Œåˆæ¬¡ä½¿ç”¨åªæœ‰ä¸€ä¸ªdefault.mdï¼Œå¯ä»¥æ ¹æ®ä¸ªäººçš„ä¸»é¢˜é…ç½®æ·»åŠ è‡ªå®šä¹‰å¤´éƒ¨ä¿¡æ¯ assets è¯¥æ–‡ä»¶å¤¹ä¸»è¦ç”¨äºä¿å­˜åšå®¢æ ·å¼csså’Œjsæ–‡ä»¶ content ä¿å­˜ä¸ªäººåšå®¢æ‰€æœ‰å†…å®¹ data ä¿å­˜ç”Ÿæˆç«™ç‚¹æ—¶å€™æ‰€éœ€è¦çš„é…ç½®æ–‡ä»¶ layouts ä»¥ä¸º.htmlå½¢å¼å­˜å‚¨æ¨¡æ¿ï¼Œå°†ä½ åšå®¢å†…å®¹å‘ˆç°ä¸ºé™æ€é¡µé¢ static å­˜å‚¨æ‰€æœ‰é™æ€å†…å®¹ï¼šå›¾ç‰‡ã€.cssã€.jsç­‰ï¼Œå½“ä½¿ç”¨ Hugo ç”Ÿæˆé™æ€é¡µé¢æ—¶ï¼Œæ‰€æœ‰å†…å®¹å°†ä¼šè¢«å¤åˆ¶ resources ç¼“å­˜ä¸€äº›æ–‡ä»¶æ¥åŠ é€Ÿç«™ç‚¹ç”Ÿæˆ themes ä¿å­˜ä¸»é¢˜ config.yml ä¸ªäººåšå®¢ä¸»é¢˜æ ·å¼é…ç½®æ–‡ä»¶ å¼•å…¥ PaperMod ä¸»é¢˜é¡¹ç›® 1 2 3 git submodule add --depth=1 https://github.com/adityatelange/hugo-PaperMod.git themes/PaperMod git submodule update --init --recursive 1.3. ç¼–è¾‘ config.yml æ–‡ä»¶ å¯ä»¥å‚è€ƒå®˜æ–¹çš„è¿›è¡Œä¿®æ”¹ï¼šhttps://github.com/adityatelange/hugo-PaperMod/wiki/Installation#sample-hugoyml\næˆ‘è¿™é‡Œæ ¹æ®ç½‘ä¸Šæ‰¾çš„æ¡ˆä¾‹ç„¶åç®€å•æ”¹äº†æ”¹ï¼š\næ³¨æ„é‡Œè¾¹çš„ publishDir: \u0026quot;docs\u0026quot; åè¾¹Github Pagesæ—¶æœ‰ç”¨\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 baseURL: https://Kyle-Derrick.github.io # ç»‘å®šçš„åŸŸå title: Kyle\u0026#39;s Notebook publishDir: \u0026#34;docs\u0026#34; # paginate: 10 # é¦–é¡µæ¯é¡µæ˜¾ç¤ºçš„æ–‡ç« æ•° theme: PaperMod # ä¸»é¢˜åç§°ï¼Œå’Œthemesæ–‡ä»¶å¤¹ä¸‹çš„ä¸€è‡´ languageCode: zh-cn # en-us # ç½‘ç«™é»˜è®¤è¯­è¨€ä¸ºç®€ä½“ä¸­æ–‡ pagination: pagerSize: 10 # æ§åˆ¶æ¯é¡µæ˜¾ç¤ºæ•°é‡ path: \u0026#34;page/\u0026#34; # å¯é€‰ï¼šåˆ†é¡µè·¯å¾„æ ¼å¼ hasCJKLanguage: true # è‡ªåŠ¨æ£€æµ‹æ˜¯å¦åŒ…å«ä¸­æ–‡æ—¥æ–‡éŸ©æ–‡,å¦‚æœæ–‡ç« ä¸­ä½¿ç”¨äº†å¾ˆå¤šä¸­æ–‡å¼•å·çš„è¯å¯ä»¥å¼€å¯ï¼ˆè§£å†³ä¸­æ–‡å¼•å·æ’ç‰ˆé—®é¢˜ï¼‰ enableInlineShortcodes: true # å…è®¸è¡Œå†…çŸ­ä»£ç  enableEmoji: true # å…è®¸ä½¿ç”¨ Emoji è¡¨æƒ…ï¼Œå»ºè®® true enableRobotsTXT: true # ç”Ÿæˆ robots.txt æ–‡ä»¶ buildDrafts: false # ä¸æ„å»ºè‰ç¨¿æ–‡ç«  buildFuture: false # ä¸æ„å»ºæœªæ¥æ—¥æœŸçš„æ–‡ç«  buildExpired: false # ä¸æ„å»ºå·²è¿‡æœŸçš„æ–‡ç«  pygmentsUseClasses: true # ä½¿ç”¨ CSS ç±»è€Œéå†…è”æ ·å¼ï¼ˆä»£ç é«˜äº®ï¼‰ # googleAnalytics: UA-123-45 minify: disableXML: true # ç¦ç”¨ XML å‹ç¼© # minifyOutput: true permalinks: post: \u0026#34;/:title/\u0026#34; # post: \u0026#34;/:year/:month/:day/:title/\u0026#34; defaultContentLanguage: zh # æœ€é¡¶éƒ¨é¦–å…ˆå±•ç¤ºçš„è¯­è¨€é¡µé¢ defaultContentLanguageInSubdir: true # æ¯ç§è¯­è¨€ç”Ÿæˆç‹¬ç«‹å­ç›®å½•ï¼ˆå¦‚ /zh/ï¼‰ languages: zh: languageName: \u0026#34;Chinese\u0026#34; # æ˜¾ç¤ºåœ¨è¯­è¨€åˆ‡æ¢å™¨ä¸­çš„åç§° # contentDir: content/english weight: 1 # æƒé‡æœ€é«˜ï¼ˆé»˜è®¤è¯­è¨€ï¼‰ outputs: home: - HTML - RSS # ç”Ÿæˆ RSS è®¢é˜…æº - JSON # ç”Ÿæˆ JSON Feed menu: main: - identifier: search name: æœç´¢ url: search weight: 1 - identifier: home name: ä¸»é¡µ url: / weight: 2 - identifier: posts name: æ–‡ç«  url: /posts weight: 3 - identifier: archives name: æ—¶é—´è½´ url: archives weight: 20 # - identifier: categories # name: ğŸ§©åˆ†ç±» # url: categories # weight: 30 - identifier: tags name: æ ‡ç­¾ url: /tags weight: 40 - identifier: about name: å…³äº url: /about weight: 50 # - identifier: links # name: ğŸ¤å‹é“¾ # url: links # weight: 60 params: env: production # to enable google analytics, opengraph, twitter-cards and schema. description: \u0026#34;è¿™æ˜¯ä¸€ä¸ªçº¯ç²¹çš„åšå®¢......\u0026#34; author: Shaohan Tian author: \u0026#34;Me\u0026#34; # author: [\u0026#34;Me\u0026#34;, \u0026#34;You\u0026#34;] # multiple authors defaultTheme: auto # è‡ªåŠ¨åˆ‡æ¢æ·±è‰²/æµ…è‰²æ¨¡å¼ disableThemeToggle: false # å…è®¸ç”¨æˆ·æ‰‹åŠ¨åˆ‡æ¢ä¸»é¢˜ DateFormat: \u0026#34;2006-01-02\u0026#34; ShowShareButtons: true ShowReadingTime: true # disableSpecialistPost: true displayFullLangName: true ShowPostNavLinks: true ShowBreadCrumbs: true ShowCodeCopyButtons: true # æ˜¾ç¤ºä»£ç å¤åˆ¶æŒ‰é’® hideFooter: false # éšè—é¡µè„š ShowWordCounts: true VisitCount: true ShowLastMod: true #æ˜¾ç¤ºæ–‡ç« æ›´æ–°æ—¶é—´ ShowToc: true # æ˜¾ç¤ºç›®å½• TocOpen: true # è‡ªåŠ¨å±•å¼€ç›®å½• comments: true # ä¸ªäººèµ„æ–™æ¨¡å—é…ç½® profileMode: enabled: true title: å¹³å¹³æ— å¥‡çš„è®°å¿†ç¢ç‰‡æ”¶çº³å¢™ # ä¸ªäººç®€ä»‹æ ‡é¢˜ subtitle: \u0026#34;æ¬¢è¿å…‰ä¸´å¯’èˆ\u0026#34; # å¸¦ HTML æ ¼å¼çš„å‰¯æ ‡é¢˜ # imageUrl: \u0026#34;img/logo.gif\u0026#34; # å¤´åƒå›¾ç‰‡è·¯å¾„ # imageTitle: # imageWidth: 150 # imageHeight: 150 buttons: # å¯¼èˆªæŒ‰é’® - name: æŠ€æœ¯ url: posts/tech - name: é˜…è¯» url: posts/read - name: ç”Ÿæ´» url: posts/life socialIcons: # ç¤¾äº¤å›¾æ ‡é“¾æ¥ - name: github url: \u0026#34;https://github.com/Kyle-Derrick\u0026#34; # - name: twitter # url: \u0026#34;img/twitter.png\u0026#34; # - name: bilibili # url: \u0026#34;https://space.bilibili.com/395280439\u0026#34; # - name: QQ # url: \u0026#34;img/qq.jpg\u0026#34; # - name: email # url: \u0026#34;mailto:shaohan.tian@foxmail.com\u0026#34; - name: RSS url: \u0026#34;index.xml\u0026#34; # - name: facebook # url: \u0026#34;https://www.facebook.com/profile.php?id=100027782410997\u0026#34; # - name: instagram # url: \u0026#34;img/instagram.png\u0026#34; # - name: QQ # url: \u0026#34;img/qq.png\u0026#34; # - name: Phone # url: \u0026#34;img/phone.png\u0026#34; # editPost: # URL: \u0026#34;https://github.com/adityatelange/hugo-PaperMod/tree/exampleSite/content\u0026#34; # Text: \u0026#34;Suggest Changes\u0026#34; # edit text # appendFilePath: true # to append file path to Edit link # label: # text: \u0026#34;Home\u0026#34; # icon: icon.png # iconHeight: 35 # analytics: # google: # SiteVerificationTag: \u0026#34;XYZabc\u0026#34; assets: favicon: \u0026#34;img/favicon.ico\u0026#34; favicon16x16: \u0026#34;img/favicon-16x16.ico\u0026#34; favicon32x32: \u0026#34;img/favicon-32x32.ico\u0026#34; apple_touch_icon: \u0026#34;img/apple-touch-icon.png\u0026#34; safari_pinned_tab: \u0026#34;img/favicon.ico\u0026#34; # cover: # hidden: true # hide everywhere but not in structured data # hiddenInList: true # hide on list pages and home # hiddenInSingle: true # hide on single page fuseOpts: # æœç´¢åŠŸèƒ½é…ç½® isCaseSensitive: false # ä¸åŒºåˆ†å¤§å°å†™ shouldSort: true location: 0 distance: 1000 threshold: 0.1 # æœç´¢æ•æ„Ÿåº¦ minMatchCharLength: 0 keys: [\u0026#34;title\u0026#34;, \u0026#34;permalink\u0026#34;, \u0026#34;summary\u0026#34;] twikoo: version: 1.4.11 taxonomies: category: categories # åˆ†ç±»ç³»ç»Ÿä½¿ç”¨ /categories/ è·¯å¾„ tag: tags # æ ‡ç­¾ç³»ç»Ÿä½¿ç”¨ /tags/ è·¯å¾„ series: series # ç³»åˆ—æ–‡ç« ä½¿ç”¨ /series/ è·¯å¾„ markup: goldmark: renderer: unsafe: true # HUGO é»˜è®¤è½¬ä¹‰ Markdown æ–‡ä»¶ä¸­çš„ HTML ä»£ç ï¼Œå¦‚éœ€å¼€å¯çš„è¯ highlight: # anchorLineNos: true codeFences: true guessSyntax: true lineNos: true # æ˜¾ç¤ºè¡Œå· # noClasses: false # style: monokai style: darcula # ä»£ç é«˜äº®ä¸»é¢˜ä¸º Darcula # codeFencesï¼šä»£ç å›´æ åŠŸèƒ½ï¼Œè¿™ä¸ªåŠŸèƒ½ä¸€èˆ¬éƒ½è¦è®¾ä¸º true çš„ï¼Œä¸ç„¶å¾ˆéš¾çœ‹ï¼Œå°±æ˜¯å¹²å·´å·´çš„-ä»£ç æ–‡å­—ï¼Œæ²¡æœ‰é¢œè‰²ã€‚ # guessSyntaxï¼šçŒœæµ‹è¯­æ³•ï¼Œè¿™ä¸ªåŠŸèƒ½å»ºè®®è®¾ç½®ä¸º true, å¦‚æœä½ æ²¡æœ‰è®¾ç½®è¦æ˜¾ç¤ºçš„è¯­è¨€åˆ™ä¼šè‡ªåŠ¨åŒ¹é…ã€‚ # hl_Linesï¼šé«˜äº®çš„è¡Œå·ï¼Œä¸€èˆ¬è¿™ä¸ªä¸è®¾ç½®ï¼Œå› ä¸ºæ¯ä¸ªä»£ç å—æˆ‘ä»¬å¯èƒ½å¸Œæœ›è®©é«˜äº®çš„åœ°æ–¹ä¸ä¸€æ ·ã€‚ # lineNoStartï¼šè¡Œå·ä»ç¼–å·å‡ å¼€å§‹ï¼Œä¸€èˆ¬ä» 1 å¼€å§‹ã€‚ # lineNosï¼šæ˜¯å¦æ˜¾ç¤ºè¡Œå·ï¼Œæˆ‘æ¯”è¾ƒå–œæ¬¢æ˜¾ç¤ºï¼Œæ‰€ä»¥æˆ‘è®¾ç½®çš„ä¸º true. # lineNumbersInTableï¼šä½¿ç”¨è¡¨æ¥æ ¼å¼åŒ–è¡Œå·å’Œä»£ç ,è€Œä¸æ˜¯ æ ‡ç­¾ã€‚è¿™ä¸ªå±æ€§ä¸€èˆ¬è®¾ç½®ä¸º true. # noClassesï¼šä½¿ç”¨ class æ ‡ç­¾ï¼Œè€Œä¸æ˜¯å†…åµŒçš„å†…è”æ ·å¼ privacy: # éšç§ç›¸å…³è®¾ç½® vimeo: disabled: false simple: true x: disabled: false enableDNT: true simple: true instagram: disabled: false simple: true youtube: disabled: false privacyEnhanced: true # å¯ç”¨ YouTube éšç§å¢å¼ºæ¨¡å¼ services: instagram: disableInlineCSS: true x: disableInlineCSS: true 1.4. æ·»åŠ æœç´¢é¡µé¢ æ·»åŠ ä»¥ä¸‹é…ç½®åˆ° config.yml æ–‡ä»¶ï¼ˆä¸Šè¿°é…ç½®æ–‡ä»¶å·²æœ‰ï¼Œæ­¤å¤„ä¸ç”¨é‡å¤æ·»åŠ ï¼‰\n1 2 3 4 5 outputs: home: - HTML - RSS - JSON # is necessary åœ¨contentæ–‡ä»¶å¤¹ä¸­åˆ›å»ºsearch.mdå¹¶æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š\n1 2 3 4 5 6 --- title: \u0026#34;æœç´¢\u0026#34; # in any language you want layout: \u0026#34;search\u0026#34; # is necessary summary: \u0026#34;search\u0026#34; placeholder: \u0026#34;æœç´¢æ¡†å†…çš„é»˜è®¤æ˜¾ç¤º\u0026#34; --- è¦ä½¿å¾—æŸäº›ç‰¹å®šçš„ä¸è¢«æœç´ åˆ°ï¼Œå¯ä»¥åœ¨åšå®¢å¼€å¤´æ·»åŠ ï¼š\n1 searchHidden: true 1.5. é…ç½®æ—¶é—´è½´é¡µé¢ åœ¨contentæ–‡ä»¶å¤¹ä¸­åˆ›å»ºarchive.mdå¹¶æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š\n1 2 3 4 5 6 --- title: \u0026#34;æ—¶é—´è½´\u0026#34; layout: \u0026#34;archives\u0026#34; url: \u0026#34;/archives/\u0026#34; summary: archives --- 1.6. é…ç½®æ ‡ç­¾é¡µé¢ 1.6.1 ä¿®æ”¹é»˜è®¤ç¿»è¯‘ åœ¨é¡¹ç›®æ ¹ç›®å½•æ–°å»ºi18n/æ–‡ä»¶å¤¹ï¼Œå¤åˆ¶themes/PaperMod/i18n/zh.yamlåˆ°i18n/zh.yaml\n1.6.2 ä¿®æ”¹ html æ¨¡æ¿ æ ‡ç­¾é¡µå¯¹åº”çš„æ¨¡æ¿æ–‡ä»¶ä¸ºthemes/PaperMod/layouts/_default/terms.htmlï¼ŒåŒä»¥ä¸Šæ­¥éª¤ï¼šåœ¨ç½‘ç«™æ ¹ç›®å½•æ–°å»ºlayouts/_default/æ–‡ä»¶å¤¹ï¼Œå¤åˆ¶themes/PaperMod/layouts/_default/terms.htmlåˆ°layouts/_default/terms.htmlï¼Œå¹¶ç¼–è¾‘ï¼ˆä¸»è¦æ·»åŠ æ ‡ç­¾é‚£å‡ è¡Œï¼‰\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 {{- define \u0026#34;main\u0026#34; }} {{- if .Title }} \u0026lt;header class=\u0026#34;page-header\u0026#34;\u0026gt; \u0026lt;h1\u0026gt;{{ .Title }}\u0026lt;/h1\u0026gt; {{- if eq .Title \u0026#34;Tags\u0026#34; }} \u0026lt;h1\u0026gt;{{ \u0026#34;æ ‡ç­¾\u0026#34; }}\u0026lt;/h1\u0026gt; \u0026lt;!-- \u0026lt;h1\u0026gt;{{ .Title }}\u0026lt;/h1\u0026gt; --\u0026gt; {{- end }} {{- if .Description }} \u0026lt;div class=\u0026#34;post-description\u0026#34;\u0026gt; {{ .Description }} \u0026lt;/div\u0026gt; {{- end }} \u0026lt;/header\u0026gt; {{- end }} \u0026lt;ul class=\u0026#34;terms-tags\u0026#34;\u0026gt; {{- $type := .Type }} {{- range $key, $value := .Data.Terms.Alphabetical }} {{- $name := .Name }} {{- $count := .Count }} {{- with site.GetPage (printf \u0026#34;/%s/%s\u0026#34; $type $name) }} \u0026lt;li\u0026gt; \u0026lt;a href=\u0026#34;{{ .Permalink }}\u0026#34;\u0026gt;{{ .Name }} \u0026lt;sup\u0026gt;\u0026lt;strong\u0026gt;\u0026lt;sup\u0026gt;{{ $count }}\u0026lt;/sup\u0026gt;\u0026lt;/strong\u0026gt;\u0026lt;/sup\u0026gt; \u0026lt;/a\u0026gt; \u0026lt;/li\u0026gt; {{- end }} {{- end }} \u0026lt;/ul\u0026gt; {{- end }}{{/* end main */ -}} 1.7. é…ç½®å…³äºé¡µé¢ æ ¹æ®å®šä¹‰å¥½çš„æ¨¡æ¿ï¼Œåœ¨æ­¤åˆ©ç”¨è¯¥æ¨¡æ¿ç”Ÿæˆå…³äºé¡µé¢ï¼Œæ ¹ç›®å½•æ‰§è¡Œæ‰§è¡Œå‘½ä»¤ï¼š\n1 hugo new --kind post content/about.md 1.8. å†…å®¹ç®¡ç† æˆ‘ä»¬å†™ä½œçš„å†…å®¹éƒ½æ˜¯æ”¾åœ¨contentç›®å½•ä¸‹çš„ï¼Œå› æ­¤æœ‰å¿…è¦å¯¹å…¶å†…å®¹æœ‰ä¸€ä¸ªåŸºæœ¬äº†è§£ åœ¨å®˜æ–¹æ–‡æ¡£ Content Management ä¸­è¯¦å°½åœ°ä»‹ç»äº†ç®¡ç†åšå®¢å†…å®¹éœ€è¦äº†è§£çš„æ‰€æœ‰ä¿¡æ¯ï¼Œä»¥ä¸‹æ˜¯æˆ‘çš„ä¸€ä¸ªç›®å½•ç»“æ„ï¼Œå…¶ä¸­çš„ about.mdã€ archive.md å’Œ search.md å¯¹åº”åšå®¢ä¸­çš„å…³äºã€æ—¶é—´è½´å’Œæœç´¢ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 content â”œâ”€â”€ posts â”‚ â”œâ”€â”€ _index.md â”‚ â”œâ”€â”€ life â”‚ â”‚ â””â”€â”€ _index.md â”‚ â”œâ”€â”€ read â”‚ â”‚ â””â”€â”€ _index.md â”‚ â””â”€â”€ tech â”‚ â””â”€â”€ _index.md â”œâ”€â”€ about.md â”œâ”€â”€ archive.md â””â”€â”€ search.md ä»¥ä¸Šç›®å½•ç»“æ„çœ‹åˆ°å‡ºç°äº†å¾ˆå¤š_index.md,å®˜æ–¹å‚è€ƒæ–‡æ¡£åœ¨æ­¤Index Pages ã€‚ç®€è€Œè¨€ä¹‹ï¼Œè¿™ä¸ªæ–‡ä»¶æ˜¯ä½œä¸ºè‡ªå®šä¹‰ç´¢å¼•é¡µå­˜åœ¨ã€‚è¿™é‡Œç»™å‡ºæˆ‘ä½¿ç”¨çš„ä¸€ä¸ª_index.mdä½œä¸ºå‚è€ƒï¼š\n1 2 3 4 5 6 7 8 --- title: \u0026#34;æ–‡ç« \u0026#34; # description: \u0026#34;æ–‡ç« ã€‚\u0026#34; hidemeta: true # æ˜¯å¦éšè—æ–‡ç« çš„å…ƒä¿¡æ¯ï¼Œå¦‚å‘å¸ƒæ—¥æœŸã€ä½œè€…ç­‰ --- æ‚ä¸ƒæ‚å…«çš„æ–‡ç« ã€‚ \u0026lt;!-- more --\u0026gt; æ³¨æ„ï¼šæ ¹æ®ä¸ªäººåšå®¢å…·ä½“åˆ†ç±»å°†å…¶ç”Ÿæˆåˆ°å¯¹åº”è·¯å¾„ã€‚\n2. Github Pageséƒ¨åˆ† 2.1. æ–°å»ºGithubä»“åº“ æ³¨æ„ä»“åº“åä¸€å®šæ˜¯ ç”¨æˆ·å.github.io çš„å½¢å¼\n2.2. æ–°å¢Github Actions åœ¨hugoæ ¹ç›®å½•æ–°å¢ .github\\workflows\\deploy-hugo-and-pages.yml\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 # Simple workflow for deploying static content to GitHub Pages name: Deploy Hugo And Github Pages on: # Runs on pushes targeting the default branch push: branches: [\u0026#34;master\u0026#34;] # Allows you to run this workflow manually from the Actions tab workflow_dispatch: # Sets permissions of the GITHUB_TOKEN to allow deployment to GitHub Pages permissions: contents: write pages: write id-token: write # Allow only one concurrent deployment, skipping runs queued between the run in-progress and latest queued. # However, do NOT cancel in-progress runs as we want to allow these production deployments to complete. concurrency: group: \u0026#34;pages\u0026#34; cancel-in-progress: false jobs: # Single deploy job since we\u0026#39;re just deploying deploy: environment: name: github-pages url: ${{ steps.deployment.outputs.page_url }} runs-on: ubuntu-latest steps: - name: Checkout uses: actions/checkout@v4 with: submodules: true fetch-depth: 0 persist-credentials: true - name: Setup Hugo uses: peaceiris/actions-hugo@v2 with: hugo-version: \u0026#34;latest\u0026#34; - name: Build Web run: hugo --gc --minify --cleanDestinationDir - name: Commit artifacts run: | git config --global user.name \u0026#34;GitHub Actions Bot\u0026#34; git config --global user.email \u0026#34;github-actions@example.com\u0026#34; git add ./docs git commit -m \u0026#34;chore: Auto-commit build artifacts [skip ci]\u0026#34; || echo \u0026#34;No changes to commit\u0026#34; git push origin HEAD:master env: GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }} # - name: Checkout # uses: actions/checkout@v4 - name: Setup Pages uses: actions/configure-pages@v5 - name: Upload artifact uses: actions/upload-pages-artifact@v3 with: # Upload entire repository path: \u0026#39;./docs\u0026#39; - name: Deploy to GitHub Pages id: deployment uses: actions/deploy-pages@v4 2.3. é…ç½®GitHub Pagesè®¾ç½® é…ç½® Build and deployment ä¸‹çš„ Source ä¸º GitHub Actions\nå®Œæˆ\n","permalink":"https://Kyle-Derrick.github.io/zh/posts/tech/other_general/hugo/hugo_and_github_pages/","summary":"\u003ch1 id=\"1-hugoéƒ¨åˆ†\"\u003e1. Hugoéƒ¨åˆ†\u003c/h1\u003e\n\u003ch2 id=\"11-å®‰è£…hugo\"\u003e1.1. å®‰è£…Hugo\u003c/h2\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/gohugoio/hugo/releases/latest\"\u003ehttps://github.com/gohugoio/hugo/releases/latest\u003c/a\u003e\u003c/p\u003e\u003c/blockquote\u003e\n\u003cp\u003eæ ¹æ®è‡ªå·±çš„æ“ä½œç³»ç»Ÿä¸‹è½½ hugo_extended_withdeploy_xxxï¼Œæˆ‘è¿™é‡Œæ˜¯Ubuntuï¼Œæ‰€ä»¥ä¸‹è½½çš„ hugo_extended_withdeploy_0.147.3_linux-amd64.deb\u003c/p\u003e","title":"Hugoä½¿ç”¨PaperModä¸»é¢˜æ­å»ºåšå®¢ï¼Œå¹¶é…ç½®è‡ªåŠ¨å‘å¸ƒGithub Pages"},{"content":"æˆ‘æ˜¯ Kyleï¼Œä¸€åçƒ­çˆ±æŠ€æœ¯åˆ†äº«çš„å¼€å‘è€…ã€‚æ­¤ç«™ç‚¹ä¸ºæ—¥å¸¸ç ”ç©¶æˆ–å­¦ä¹ è¿‡ç¨‹ä¸­çš„ä¸€äº›è®°å½•ç‚¹ï¼ˆæˆ–è€…è¯´ç¬”è®°ï¼‰ï¼Œä¸»è¦ç ”ç©¶æ–¹å‘ï¼š\nRust Golang Java Python C æœºå™¨å­¦ä¹ \næ¬¢è¿å¤§å®¶ä¸€èµ·äº¤æµå­¦ä¹ ï¼\n","permalink":"https://Kyle-Derrick.github.io/zh/about/","summary":"å…³äº Kyle\u0026rsquo;s Notebook","title":"å…³äºæˆ‘"}]